<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="ipynb_website:version" content="0.9.7" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="twitter:card" content="summary_large_image"></meta>
<meta property="og:title" content="US Macroeconomic Data Explorer | US Air Freight and Waterway Volumes" />
<meta property="og:type" content="article" />
<meta property="og:description" content="A look at air and domestic waterway freight volumes, according to the US DOT Bureau of Transportation Statistics." />
<meta property="og:image" content="https://pymoment.github.io/us-macro/analysis/transportation-air-waterway.png" />
<meta property="og:url" content="https://pymoment.github.io/us-macro/analysis/transportation-air-waterway.html" />

<!-- begin stylesheets -->

<link rel="stylesheet"
    href="../css/jt.css">
<link rel="stylesheet"
    href="../css/toc2.css">
<link rel="stylesheet"
    href="../site_libs/jqueryui-1.11.4/jquery-ui.css">
<link rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/default.min.css">
    
<link rel="stylesheet" type="text/css" href="../css/readable.css">
<!-- end stylesheets -->

<!-- begin javascript -->

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Bootstrap 4 -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- Vega/Vegalite -->
<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/highlight.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    
<!-- end javascript -->


<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
    if (window.hljs &&
        document.readyState &&
        document.readyState === "complete") {
       window.setTimeout(() => {
          hljs.initHighlighting();
       }, 0);
    }
</script>
    

<script src="../js/doc_toc.js"></script>
<script src="../js/docs.js"></script>


<script>
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true
        },
        "HTML-CSS": {
            preferredFont: "TeX",
            availableFonts: ["TeX"],
            styles: {
                scale: 110,
                ".MathJax_Display": {
                    "font-size": "110%%",
                }
            }
        }
    });
</script>
    

<script>
function filterDataFrame(id) {
    var input = document.getElementById("search_" + id);
    var filter = input.value.toUpperCase();
    var table = document.getElementById("dataframe_" + id);
    var tr = table.getElementsByTagName("tr");
    // Loop through all table rows, and hide those who don't match the search query
    for (var i = 1; i < tr.length; i++) {
        for (var j = 0; j < tr[i].cells.length; ++j) {
            var matched = false;
            if (tr[i].cells[j].innerHTML.toUpperCase().indexOf(filter) != -1) {
                tr[i].style.display = "";
                matched = true
                break;
            }
            if (!matched)
                tr[i].style.display = "none";
        }
    }
}

function sortDataFrame(id, n, dtype) {
    var table = document.getElementById("dataframe_" + id);
    var tb = table.tBodies[0]; // use `<tbody>` to ignore `<thead>` and `<tfoot>` rows
    var tr = Array.prototype.slice.call(tb.rows, 0); // put rows into array
    if (dtype === 'numeric') {
        var fn = (a, b) =>
            parseFloat(a.cells[n].textContent) <= parseFloat(b.cells[n].textContent) ? -1 : 1;
    } else {
        var fn = function(a, b) {
            var c = a.cells[n].textContent.trim().localeCompare(b.cells[n].textContent.trim());
            return c > 0 ? 1 : (c < 0 ? -1 : 0) }
    }
    var isSorted = function(array, fn) {
        if (array.length < 2)
            return 1;
        var direction = fn(array[0], array[1]);
        for (var i = 1; i < array.length - 1; ++i) {
            var d = fn(array[i], array[i+1]);
            if (d == 0)
                continue;
            else if (direction == 0)
                direction = d;
            else if (direction != d)
                return 0;
            }
        return direction;
    }
    var sorted = isSorted(tr, fn);
    if (sorted == 1 || sorted == -1) {
        // if sorted already, reverse it
        for(var i = tr.length - 1; i >= 0; --i)
            tb.appendChild(tr[i]); // append each row in order
    } else {
        tr = tr.sort(fn);
        for(var i = 0; i < tr.length; ++i)
            tb.appendChild(tr[i]); // append each row in order
    }
}
</script>




<script>
    // manage active state of menu based on current page
    $(document).ready(function () {
      // active menu anchor
      href = window.location.pathname
      href = href.substr(href.lastIndexOf('/') + 1)
      if (href === "")
        href = "index.html";
      var menuAnchor = $('a[href*="' + href + '"]');
      // mark it active
      menuAnchor.parent().addClass('active');
      // if it's got a parent navbar menu mark it active as well
      menuAnchor.closest('li.dropdown').addClass('active');
    });
</script>
    

<div class="container-fluid main-container">

<!-- tabsets -->
<script src="../site_libs/navigation-1.1/tabsets.js"></script>
<script>
    $(document).ready(function () {
      window.buildTabsets("TOC");
    });
</script>



<title>US Macroeconomic Data Explorer | US Air Freight and Waterway Volumes</title>

<style type = "text/css">
    body {
      
    }
</style>
</head>

<body>
<div tabindex="-1" id="notebook" class="border-box-sizing">
<div class="container" id="notebook-container">

<!-- code folding -->


<nav class="navbar navbar-expand-lg sticky-top navbar-light bg-light">
    <a class="navbar-brand" href="../index.html">US Macroeconomic Data Explorer</a>
    <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#navbar" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="navbar-nav mr-auto">
        
<li class="nav-item">
  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
</li>
        
<li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle btn" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color: steelblue; color: white;">
    Explore other charts
  </a>
  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
  

    <a class="dropdown-item" href="../analysis/autos.html">Autos</a>
        
    <a class="dropdown-item" href="../analysis/construction.html">Construction</a>
        
    <a class="dropdown-item" href="../analysis/creditcards.html">Creditcards</a>
        
    <a class="dropdown-item" href="../analysis/dairy.html">Dairy</a>
        
    <a class="dropdown-item" href="../analysis/electricity.html">Electricity</a>
        
    <a class="dropdown-item" href="../analysis/international-trade.html">International Trade</a>
        
    <a class="dropdown-item" href="../analysis/labor.html">Labor</a>
        
    <a class="dropdown-item" href="../analysis/manufacturing.html">Manufacturing</a>
        
    <a class="dropdown-item" href="../analysis/oil-gas-inventories.html">Oil Gas Inventories</a>
        
    <a class="dropdown-item" href="../analysis/residential-realestate-zillow.html">Residential Realestate Zillow</a>
        
    <a class="dropdown-item" href="../analysis/residential-realestate.html">Residential Realestate</a>
        
    <a class="dropdown-item" href="../analysis/retailsales.html">Retailsales</a>
        
    <a class="dropdown-item" href="../analysis/sentiment.html">Sentiment</a>
        
    <a class="dropdown-item" href="../analysis/services.html">Services</a>
        
    <a class="dropdown-item" href="../analysis/sp500-returns-and-performance.html">Sp500 Returns And Performance</a>
        
    <a class="dropdown-item" href="../analysis/transportation-air-waterway.html">Transportation Air Waterway</a>
        
    <a class="dropdown-item" href="../analysis/transportation-cass.html">Transportation Cass</a>
        
    <a class="dropdown-item" href="../analysis/transportation-ocean.html">Transportation Ocean</a>
        
    <a class="dropdown-item" href="../analysis/transportation-rail.html">Transportation Rail</a>
        
    <a class="dropdown-item" href="../analysis/us-treasury-auctions.html">Us Treasury Auctions</a>
        
    <a class="dropdown-item" href="../analysis/us-treasury-rates.html">Us Treasury Rates</a>
        
  </div>
</li>
      </ul>
        
<ul class="navbar-nav">
<li class="nav-item">
   <a class="nav-link" href="http://github.com/pymoment/us-macro"> source </a>
</li>
</ul>
        
    </div><!--/.nav-collapse -->
</nav><!--/.navbar -->
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="US-Air-Freight-and-Waterway-Volumes">US Air Freight and Waterway Volumes<a class="anchor-link" href="#US-Air-Freight-and-Waterway-Volumes">&#182;</a></h1><hr>
<p>A look at air and domestic waterway freight volumes, according to the US DOT Bureau of Transportation Statistics.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">environ</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="c1">#if environ.get(&quot;GITHUB_WORKFLOW&quot;):</span>
<span class="c1">#    raise RuntimeError(&quot;Requires manual updates&quot;)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">doComboChart</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;AIR_RTMFM&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;US Air Freight Volume&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Volume [ton-miles]&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>

    <span class="n">brush</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">selection</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;interval&#39;</span><span class="p">,</span> <span class="n">encodings</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
    
    <span class="n">base</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[[</span><span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;purple&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;dt:T&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s1">:Q&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">label</span><span class="p">)),</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;dt:T&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%b %Y&quot;</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s2">:Q&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;,.02f&quot;</span><span class="p">)]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">750</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">400</span>
    <span class="p">)</span>

    <span class="n">upper</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">transform_window</span><span class="p">(</span>
        <span class="n">window</span><span class="o">=</span><span class="p">[</span><span class="n">alt</span><span class="o">.</span><span class="n">WindowFieldDef</span><span class="p">(</span><span class="s2">&quot;lag&quot;</span><span class="p">,</span> <span class="n">metric</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span> <span class="s1">&#39;as&#39;</span><span class="p">:</span> <span class="s1">&#39;previous&#39;</span> <span class="p">})],</span>
        <span class="n">sort</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;dt&quot;</span><span class="p">}],</span>
    <span class="p">)</span><span class="o">.</span><span class="n">transform_calculate</span><span class="p">(</span>
        <span class="n">yoy</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;((datum[&#39;</span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s2">&#39;] - datum.previous) / datum.previous) * 100&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;dt:T&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="n">brush</span><span class="p">),</span> <span class="n">impute</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">ImputeParams</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">)),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;yoy:Q&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Year-over-Year Growth [%]&#39;</span><span class="p">),</span> <span class="n">impute</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">ImputeParams</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">keyvals</span><span class="o">=</span><span class="p">[</span><span class="mi">400</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])),</span>
        <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;datum[&#39;yoy&#39;] &lt; 0&quot;</span><span class="p">,</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;lightsalmon&#39;</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;royalblue&#39;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
    <span class="p">)</span>
    
    <span class="n">lower</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">100</span>
    <span class="p">)</span><span class="o">.</span><span class="n">add_selection</span><span class="p">(</span><span class="n">brush</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">upper</span> <span class="o">&amp;</span> <span class="n">lower</span><span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># https://data.bts.gov/Research-and-Statistics/Transportation-Services-Index-and-Seasonally-Adjus/bw6n-ddqk</span>

<span class="n">df_af</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://data.bts.gov/api/views/bw6n-ddqk/rows.csv?accessType=DOWNLOAD&#39;</span><span class="p">)</span>
<span class="n">df_af</span> <span class="o">=</span> <span class="n">df_af</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span>
<span class="n">df_af</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_af</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c1">#df_af.head()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Airline-Freight">Airline Freight<a class="anchor-link" href="#Airline-Freight">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">doComboChart</span><span class="p">(</span><span class="n">df_af</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;transportation-air-waterway.png&#39;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



   
        
            
<div class="output_html rendered_html output_subarea ">
<div id="altair-viz-c9b348172be94c20b84293e0b69146bc"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-c9b348172be94c20b84293e0b69146bc") {
      outputDiv = document.getElementById("altair-viz-c9b348172be94c20b84293e0b69146bc");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "4.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "vconcat": [{"mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['yoy'] < 0"}, "value": "royalblue"}, "tooltip": [{"field": "dt", "format": "%b %Y", "type": "temporal"}, {"field": "AIR_RTMFM", "format": ",.02f", "type": "quantitative"}], "x": {"axis": {"title": ""}, "field": "dt", "impute": {"value": null}, "scale": {"domain": {"selection": "selector001"}}, "type": "temporal"}, "y": {"axis": {"title": "Year-over-Year Growth [%]"}, "field": "yoy", "impute": {"keyvals": [400, 1000], "method": "value"}, "type": "quantitative"}}, "height": 400, "title": "US Air Freight Volume", "transform": [{"window": [{"op": "lag", "field": "AIR_RTMFM", "param": 12, "as": "previous"}], "sort": [{"field": "dt"}]}, {"calculate": "((datum['AIR_RTMFM'] - datum.previous) / datum.previous) * 100", "as": "yoy"}], "width": 750}, {"mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"field": "dt", "format": "%b %Y", "type": "temporal"}, {"field": "AIR_RTMFM", "format": ",.02f", "type": "quantitative"}], "x": {"axis": {"title": ""}, "field": "dt", "type": "temporal"}, "y": {"axis": {"title": "Volume [ton-miles]"}, "field": "AIR_RTMFM", "type": "quantitative"}}, "height": 100, "selection": {"selector001": {"type": "interval", "encodings": ["x"]}}, "width": 750}], "background": "white", "data": {"name": "data-c4b2850af5fc5b31dc6f9f3be33bd69f"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-c4b2850af5fc5b31dc6f9f3be33bd69f": [{"dt": "01/01/2000", "AIR_RTMFM": 2182683.0}, {"dt": "02/01/2000", "AIR_RTMFM": 2341123.0}, {"dt": "03/01/2000", "AIR_RTMFM": 2699633.0}, {"dt": "04/01/2000", "AIR_RTMFM": 2528558.0}, {"dt": "05/01/2000", "AIR_RTMFM": 2528225.0}, {"dt": "06/01/2000", "AIR_RTMFM": 2537148.0}, {"dt": "07/01/2000", "AIR_RTMFM": 2461623.0}, {"dt": "08/01/2000", "AIR_RTMFM": 2623412.0}, {"dt": "09/01/2000", "AIR_RTMFM": 2711279.0}, {"dt": "10/01/2000", "AIR_RTMFM": 2839068.0}, {"dt": "11/01/2000", "AIR_RTMFM": 2702423.0}, {"dt": "12/01/2000", "AIR_RTMFM": 2707863.0}, {"dt": "01/01/2001", "AIR_RTMFM": 2290401.0}, {"dt": "02/01/2001", "AIR_RTMFM": 2276553.0}, {"dt": "03/01/2001", "AIR_RTMFM": 2671787.0}, {"dt": "04/01/2001", "AIR_RTMFM": 2399580.0}, {"dt": "05/01/2001", "AIR_RTMFM": 2415262.0}, {"dt": "06/01/2001", "AIR_RTMFM": 2475195.0}, {"dt": "07/01/2001", "AIR_RTMFM": 2226571.0}, {"dt": "08/01/2001", "AIR_RTMFM": 2356106.0}, {"dt": "09/01/2001", "AIR_RTMFM": 1998724.0}, {"dt": "10/01/2001", "AIR_RTMFM": 2417439.0}, {"dt": "11/01/2001", "AIR_RTMFM": 2261922.0}, {"dt": "12/01/2001", "AIR_RTMFM": 2332011.0}, {"dt": "01/01/2002", "AIR_RTMFM": 2049355.0}, {"dt": "02/01/2002", "AIR_RTMFM": 2024465.0}, {"dt": "03/01/2002", "AIR_RTMFM": 2483076.0}, {"dt": "04/01/2002", "AIR_RTMFM": 2426477.0}, {"dt": "05/01/2002", "AIR_RTMFM": 2408401.0}, {"dt": "06/01/2002", "AIR_RTMFM": 2477418.0}, {"dt": "07/01/2002", "AIR_RTMFM": 2521489.0}, {"dt": "08/01/2002", "AIR_RTMFM": 2518364.0}, {"dt": "09/01/2002", "AIR_RTMFM": 2385972.0}, {"dt": "10/01/2002", "AIR_RTMFM": 3345807.0}, {"dt": "11/01/2002", "AIR_RTMFM": 3074803.0}, {"dt": "12/01/2002", "AIR_RTMFM": 2810584.0}, {"dt": "01/01/2003", "AIR_RTMFM": 2573661.0}, {"dt": "02/01/2003", "AIR_RTMFM": 2446178.0}, {"dt": "03/01/2003", "AIR_RTMFM": 2925823.0}, {"dt": "04/01/2003", "AIR_RTMFM": 2733039.0}, {"dt": "05/01/2003", "AIR_RTMFM": 2732471.0}, {"dt": "06/01/2003", "AIR_RTMFM": 2680999.0}, {"dt": "07/01/2003", "AIR_RTMFM": 2794091.0}, {"dt": "08/01/2003", "AIR_RTMFM": 2819634.0}, {"dt": "09/01/2003", "AIR_RTMFM": 2748240.0}, {"dt": "10/01/2003", "AIR_RTMFM": 3104919.0}, {"dt": "11/01/2003", "AIR_RTMFM": 3008398.0}, {"dt": "12/01/2003", "AIR_RTMFM": 2973296.0}, {"dt": "01/01/2004", "AIR_RTMFM": 2618911.0}, {"dt": "02/01/2004", "AIR_RTMFM": 2825337.0}, {"dt": "03/01/2004", "AIR_RTMFM": 3269430.0}, {"dt": "04/01/2004", "AIR_RTMFM": 3087285.0}, {"dt": "05/01/2004", "AIR_RTMFM": 3083767.0}, {"dt": "06/01/2004", "AIR_RTMFM": 3081024.0}, {"dt": "07/01/2004", "AIR_RTMFM": 3188225.0}, {"dt": "08/01/2004", "AIR_RTMFM": 3112989.0}, {"dt": "09/01/2004", "AIR_RTMFM": 3246085.0}, {"dt": "10/01/2004", "AIR_RTMFM": 3517860.0}, {"dt": "11/01/2004", "AIR_RTMFM": 3438313.0}, {"dt": "12/01/2004", "AIR_RTMFM": 3485518.0}, {"dt": "01/01/2005", "AIR_RTMFM": 2977459.0}, {"dt": "02/01/2005", "AIR_RTMFM": 2815089.0}, {"dt": "03/01/2005", "AIR_RTMFM": 3427927.0}, {"dt": "04/01/2005", "AIR_RTMFM": 3305046.0}, {"dt": "05/01/2005", "AIR_RTMFM": 3186654.0}, {"dt": "06/01/2005", "AIR_RTMFM": 3332961.0}, {"dt": "07/01/2005", "AIR_RTMFM": 3221428.0}, {"dt": "08/01/2005", "AIR_RTMFM": 3271476.0}, {"dt": "09/01/2005", "AIR_RTMFM": 3312249.0}, {"dt": "10/01/2005", "AIR_RTMFM": 3504372.0}, {"dt": "11/01/2005", "AIR_RTMFM": 3494552.0}, {"dt": "12/01/2005", "AIR_RTMFM": 3457971.0}, {"dt": "01/01/2006", "AIR_RTMFM": 2921183.0}, {"dt": "02/01/2006", "AIR_RTMFM": 2760326.0}, {"dt": "03/01/2006", "AIR_RTMFM": 3617369.0}, {"dt": "04/01/2006", "AIR_RTMFM": 3270920.0}, {"dt": "05/01/2006", "AIR_RTMFM": 3210319.0}, {"dt": "06/01/2006", "AIR_RTMFM": 3367968.0}, {"dt": "07/01/2006", "AIR_RTMFM": 3201529.0}, {"dt": "08/01/2006", "AIR_RTMFM": 3395702.0}, {"dt": "09/01/2006", "AIR_RTMFM": 3387556.0}, {"dt": "10/01/2006", "AIR_RTMFM": 3514733.0}, {"dt": "11/01/2006", "AIR_RTMFM": 3606059.0}, {"dt": "12/01/2006", "AIR_RTMFM": 3506047.0}, {"dt": "01/01/2007", "AIR_RTMFM": 3026361.0}, {"dt": "02/01/2007", "AIR_RTMFM": 2908924.0}, {"dt": "03/01/2007", "AIR_RTMFM": 3590561.0}, {"dt": "04/01/2007", "AIR_RTMFM": 3256970.0}, {"dt": "05/01/2007", "AIR_RTMFM": 3283361.0}, {"dt": "06/01/2007", "AIR_RTMFM": 3282603.0}, {"dt": "07/01/2007", "AIR_RTMFM": 3237816.0}, {"dt": "08/01/2007", "AIR_RTMFM": 3373928.0}, {"dt": "09/01/2007", "AIR_RTMFM": 3321480.0}, {"dt": "10/01/2007", "AIR_RTMFM": 3560820.0}, {"dt": "11/01/2007", "AIR_RTMFM": 3560924.0}, {"dt": "12/01/2007", "AIR_RTMFM": 3458868.0}, {"dt": "01/01/2008", "AIR_RTMFM": 3065185.0}, {"dt": "02/01/2008", "AIR_RTMFM": 2937434.0}, {"dt": "03/01/2008", "AIR_RTMFM": 3365775.0}, {"dt": "04/01/2008", "AIR_RTMFM": 3414759.0}, {"dt": "05/01/2008", "AIR_RTMFM": 3243077.0}, {"dt": "06/01/2008", "AIR_RTMFM": 3103666.0}, {"dt": "07/01/2008", "AIR_RTMFM": 3101001.0}, {"dt": "08/01/2008", "AIR_RTMFM": 3043654.0}, {"dt": "09/01/2008", "AIR_RTMFM": 2973954.0}, {"dt": "10/01/2008", "AIR_RTMFM": 3142112.0}, {"dt": "11/01/2008", "AIR_RTMFM": 2791288.0}, {"dt": "12/01/2008", "AIR_RTMFM": 2629749.0}, {"dt": "01/01/2009", "AIR_RTMFM": 2257630.0}, {"dt": "02/01/2009", "AIR_RTMFM": 2190771.0}, {"dt": "03/01/2009", "AIR_RTMFM": 2493784.0}, {"dt": "04/01/2009", "AIR_RTMFM": 2474719.0}, {"dt": "05/01/2009", "AIR_RTMFM": 2427371.0}, {"dt": "06/01/2009", "AIR_RTMFM": 2613309.0}, {"dt": "07/01/2009", "AIR_RTMFM": 2618063.0}, {"dt": "08/01/2009", "AIR_RTMFM": 2612420.0}, {"dt": "09/01/2009", "AIR_RTMFM": 2747556.0}, {"dt": "10/01/2009", "AIR_RTMFM": 3045702.0}, {"dt": "11/01/2009", "AIR_RTMFM": 3052858.0}, {"dt": "12/01/2009", "AIR_RTMFM": 3127833.0}, {"dt": "01/01/2010", "AIR_RTMFM": 2628608.0}, {"dt": "02/01/2010", "AIR_RTMFM": 2564858.0}, {"dt": "03/01/2010", "AIR_RTMFM": 3056955.0}, {"dt": "04/01/2010", "AIR_RTMFM": 2990288.0}, {"dt": "05/01/2010", "AIR_RTMFM": 3123899.0}, {"dt": "06/01/2010", "AIR_RTMFM": 3083661.0}, {"dt": "07/01/2010", "AIR_RTMFM": 3069914.0}, {"dt": "08/01/2010", "AIR_RTMFM": 3056160.0}, {"dt": "09/01/2010", "AIR_RTMFM": 3086870.0}, {"dt": "10/01/2010", "AIR_RTMFM": 3315367.0}, {"dt": "11/01/2010", "AIR_RTMFM": 3238034.0}, {"dt": "12/01/2010", "AIR_RTMFM": 3301087.0}, {"dt": "01/01/2011", "AIR_RTMFM": 2872137.0}, {"dt": "02/01/2011", "AIR_RTMFM": 2662372.0}, {"dt": "03/01/2011", "AIR_RTMFM": 3410298.0}, {"dt": "04/01/2011", "AIR_RTMFM": 3179047.0}, {"dt": "05/01/2011", "AIR_RTMFM": 3082305.0}, {"dt": "06/01/2011", "AIR_RTMFM": 3080023.0}, {"dt": "07/01/2011", "AIR_RTMFM": 3059306.0}, {"dt": "08/01/2011", "AIR_RTMFM": 3063273.0}, {"dt": "09/01/2011", "AIR_RTMFM": 3013752.0}, {"dt": "10/01/2011", "AIR_RTMFM": 3174452.0}, {"dt": "11/01/2011", "AIR_RTMFM": 3141029.0}, {"dt": "12/01/2011", "AIR_RTMFM": 3261313.0}, {"dt": "01/01/2012", "AIR_RTMFM": 2669174.0}, {"dt": "02/01/2012", "AIR_RTMFM": 2809512.0}, {"dt": "03/01/2012", "AIR_RTMFM": 3307453.0}, {"dt": "04/01/2012", "AIR_RTMFM": 2990274.0}, {"dt": "05/01/2012", "AIR_RTMFM": 3126142.0}, {"dt": "06/01/2012", "AIR_RTMFM": 3091102.0}, {"dt": "07/01/2012", "AIR_RTMFM": 2998876.0}, {"dt": "08/01/2012", "AIR_RTMFM": 3018293.0}, {"dt": "09/01/2012", "AIR_RTMFM": 2969583.0}, {"dt": "10/01/2012", "AIR_RTMFM": 3009063.0}, {"dt": "11/01/2012", "AIR_RTMFM": 3099439.0}, {"dt": "12/01/2012", "AIR_RTMFM": 3070883.0}, {"dt": "01/01/2013", "AIR_RTMFM": 2825268.0}, {"dt": "02/01/2013", "AIR_RTMFM": 2564138.0}, {"dt": "03/01/2013", "AIR_RTMFM": 3043702.0}, {"dt": "04/01/2013", "AIR_RTMFM": 2932522.0}, {"dt": "05/01/2013", "AIR_RTMFM": 2859231.0}, {"dt": "06/01/2013", "AIR_RTMFM": 2870590.0}, {"dt": "07/01/2013", "AIR_RTMFM": 2864407.0}, {"dt": "08/01/2013", "AIR_RTMFM": 2893384.0}, {"dt": "09/01/2013", "AIR_RTMFM": 2784913.0}, {"dt": "10/01/2013", "AIR_RTMFM": 3087864.0}, {"dt": "11/01/2013", "AIR_RTMFM": 3009318.0}, {"dt": "12/01/2013", "AIR_RTMFM": 3068925.0}, {"dt": "01/01/2014", "AIR_RTMFM": 2720657.0}, {"dt": "02/01/2014", "AIR_RTMFM": 2425044.0}, {"dt": "03/01/2014", "AIR_RTMFM": 3042193.0}, {"dt": "04/01/2014", "AIR_RTMFM": 2924333.0}, {"dt": "05/01/2014", "AIR_RTMFM": 3022743.0}, {"dt": "06/01/2014", "AIR_RTMFM": 2932966.0}, {"dt": "07/01/2014", "AIR_RTMFM": 3081705.0}, {"dt": "08/01/2014", "AIR_RTMFM": 2965888.0}, {"dt": "09/01/2014", "AIR_RTMFM": 2897972.0}, {"dt": "10/01/2014", "AIR_RTMFM": 3201548.0}, {"dt": "11/01/2014", "AIR_RTMFM": 3150257.0}, {"dt": "12/01/2014", "AIR_RTMFM": 3241011.0}, {"dt": "01/01/2015", "AIR_RTMFM": 2842181.0}, {"dt": "02/01/2015", "AIR_RTMFM": 2750727.0}, {"dt": "03/01/2015", "AIR_RTMFM": 3140177.0}, {"dt": "04/01/2015", "AIR_RTMFM": 3047441.0}, {"dt": "05/01/2015", "AIR_RTMFM": 2975003.0}, {"dt": "06/01/2015", "AIR_RTMFM": 2954345.0}, {"dt": "07/01/2015", "AIR_RTMFM": 3002075.0}, {"dt": "08/01/2015", "AIR_RTMFM": 2889286.0}, {"dt": "09/01/2015", "AIR_RTMFM": 3004570.0}, {"dt": "10/01/2015", "AIR_RTMFM": 3207280.0}, {"dt": "11/01/2015", "AIR_RTMFM": 3105218.0}, {"dt": "12/01/2015", "AIR_RTMFM": 3276384.0}, {"dt": "01/01/2016", "AIR_RTMFM": 2815647.0}, {"dt": "02/01/2016", "AIR_RTMFM": 2558377.0}, {"dt": "03/01/2016", "AIR_RTMFM": 3083370.0}, {"dt": "04/01/2016", "AIR_RTMFM": 3046837.0}, {"dt": "05/01/2016", "AIR_RTMFM": 2978308.0}, {"dt": "06/01/2016", "AIR_RTMFM": 3050262.0}, {"dt": "07/01/2016", "AIR_RTMFM": 3031681.0}, {"dt": "08/01/2016", "AIR_RTMFM": 3089859.0}, {"dt": "09/01/2016", "AIR_RTMFM": 3144378.0}, {"dt": "10/01/2016", "AIR_RTMFM": 3363915.0}, {"dt": "11/01/2016", "AIR_RTMFM": 3397217.0}, {"dt": "12/01/2016", "AIR_RTMFM": 3455965.0}, {"dt": "01/01/2017", "AIR_RTMFM": 2993084.0}, {"dt": "02/01/2017", "AIR_RTMFM": 2710384.0}, {"dt": "03/01/2017", "AIR_RTMFM": 3435973.0}, {"dt": "04/01/2017", "AIR_RTMFM": 3249956.0}, {"dt": "05/01/2017", "AIR_RTMFM": 3395667.0}, {"dt": "06/01/2017", "AIR_RTMFM": 3442624.0}, {"dt": "07/01/2017", "AIR_RTMFM": 3451415.0}, {"dt": "08/01/2017", "AIR_RTMFM": 3534006.0}, {"dt": "09/01/2017", "AIR_RTMFM": 3514537.0}, {"dt": "10/01/2017", "AIR_RTMFM": 3725503.0}, {"dt": "11/01/2017", "AIR_RTMFM": 3845508.0}, {"dt": "12/01/2017", "AIR_RTMFM": 3809832.0}, {"dt": "01/01/2018", "AIR_RTMFM": 3401406.0}, {"dt": "02/01/2018", "AIR_RTMFM": 3085190.0}, {"dt": "03/01/2018", "AIR_RTMFM": 3751133.0}, {"dt": "04/01/2018", "AIR_RTMFM": 3551100.0}, {"dt": "05/01/2018", "AIR_RTMFM": 3754233.0}, {"dt": "06/01/2018", "AIR_RTMFM": 3700670.0}, {"dt": "07/01/2018", "AIR_RTMFM": 3653015.0}, {"dt": "08/01/2018", "AIR_RTMFM": 3670746.0}, {"dt": "09/01/2018", "AIR_RTMFM": 3699181.0}, {"dt": "10/01/2018", "AIR_RTMFM": 3947441.0}, {"dt": "11/01/2018", "AIR_RTMFM": 3813572.0}, {"dt": "12/01/2018", "AIR_RTMFM": 3841788.0}, {"dt": "01/01/2019", "AIR_RTMFM": 3500821.0}, {"dt": "02/01/2019", "AIR_RTMFM": 3016466.0}, {"dt": "03/01/2019", "AIR_RTMFM": 3782254.0}, {"dt": "04/01/2019", "AIR_RTMFM": 3618255.0}, {"dt": "05/01/2019", "AIR_RTMFM": 3745098.0}, {"dt": "06/01/2019", "AIR_RTMFM": 3595928.0}, {"dt": "07/01/2019", "AIR_RTMFM": 3655379.0}, {"dt": "08/01/2019", "AIR_RTMFM": 3670233.0}, {"dt": "09/01/2019", "AIR_RTMFM": 3528614.0}, {"dt": "10/01/2019", "AIR_RTMFM": 3832869.0}, {"dt": "11/01/2019", "AIR_RTMFM": 3850416.0}, {"dt": "12/01/2019", "AIR_RTMFM": 3675337.0}, {"dt": "01/01/2020", "AIR_RTMFM": 3357167.0}, {"dt": "02/01/2020", "AIR_RTMFM": 2954419.0}, {"dt": "03/01/2020", "AIR_RTMFM": 3607776.0}, {"dt": "04/01/2020", "AIR_RTMFM": 3473099.0}, {"dt": "05/01/2020", "AIR_RTMFM": 3813574.0}, {"dt": "06/01/2020", "AIR_RTMFM": 3910916.0}, {"dt": "07/01/2020", "AIR_RTMFM": 4047716.0}, {"dt": "08/01/2020", "AIR_RTMFM": 4005868.0}, {"dt": "09/01/2020", "AIR_RTMFM": 4107403.0}, {"dt": "10/01/2020", "AIR_RTMFM": 4347617.0}, {"dt": "11/01/2020", "AIR_RTMFM": 4357871.0}, {"dt": "12/01/2020", "AIR_RTMFM": 4447502.0}, {"dt": "01/01/2021", "AIR_RTMFM": 4078150.0}, {"dt": "02/01/2021", "AIR_RTMFM": 3563126.0}, {"dt": "03/01/2021", "AIR_RTMFM": 4652578.0}, {"dt": "04/01/2021", "AIR_RTMFM": 4542139.0}, {"dt": "05/01/2021", "AIR_RTMFM": 4501273.0}, {"dt": "06/01/2021", "AIR_RTMFM": 4374325.0}, {"dt": "07/01/2021", "AIR_RTMFM": 4426509.0}, {"dt": "08/01/2021", "AIR_RTMFM": 4317023.0}, {"dt": "09/01/2021", "AIR_RTMFM": 4305893.0}, {"dt": "10/01/2021", "AIR_RTMFM": 4564395.0}, {"dt": "11/01/2021", "AIR_RTMFM": 4403123.0}, {"dt": "12/01/2021", "AIR_RTMFM": 4787729.0}, {"dt": "01/01/2022", "AIR_RTMFM": 4139487.0}, {"dt": "02/01/2022", "AIR_RTMFM": 3875053.0}, {"dt": "03/01/2022", "AIR_RTMFM": 4678075.0}, {"dt": "04/01/2022", "AIR_RTMFM": 4423093.0}, {"dt": "05/01/2022", "AIR_RTMFM": 4360813.0}, {"dt": "06/01/2022", "AIR_RTMFM": 4234313.0}, {"dt": "07/01/2022", "AIR_RTMFM": 4209033.0}, {"dt": "08/01/2022", "AIR_RTMFM": 4236419.0}, {"dt": "09/01/2022", "AIR_RTMFM": 4161426.0}, {"dt": "10/01/2022", "AIR_RTMFM": 4293846.0}, {"dt": "11/01/2022", "AIR_RTMFM": 4224792.0}, {"dt": "12/01/2022", "AIR_RTMFM": 4283512.0}, {"dt": "01/01/2023", "AIR_RTMFM": 3463840.0}]}}, {"mode": "vega-lite"});
</script></div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Internal-Waterways-Shipping">Internal Waterways Shipping<a class="anchor-link" href="#Internal-Waterways-Shipping">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doComboChart</span><span class="p">(</span><span class="n">df_af</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;WATERBORNE&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;US Internal Waterways Shipping Volume&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Volume [Million short tons]&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">
<div id="altair-viz-19fa0fad95a14660bff56739d885317e"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-19fa0fad95a14660bff56739d885317e") {
      outputDiv = document.getElementById("altair-viz-19fa0fad95a14660bff56739d885317e");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "4.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "vconcat": [{"mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['yoy'] < 0"}, "value": "royalblue"}, "tooltip": [{"field": "dt", "format": "%b %Y", "type": "temporal"}, {"field": "WATERBORNE", "format": ",.02f", "type": "quantitative"}], "x": {"axis": {"title": ""}, "field": "dt", "impute": {"value": null}, "scale": {"domain": {"selection": "selector002"}}, "type": "temporal"}, "y": {"axis": {"title": "Year-over-Year Growth [%]"}, "field": "yoy", "impute": {"keyvals": [400, 1000], "method": "value"}, "type": "quantitative"}}, "height": 400, "title": "US Internal Waterways Shipping Volume", "transform": [{"window": [{"op": "lag", "field": "WATERBORNE", "param": 12, "as": "previous"}], "sort": [{"field": "dt"}]}, {"calculate": "((datum['WATERBORNE'] - datum.previous) / datum.previous) * 100", "as": "yoy"}], "width": 750}, {"mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"field": "dt", "format": "%b %Y", "type": "temporal"}, {"field": "WATERBORNE", "format": ",.02f", "type": "quantitative"}], "x": {"axis": {"title": ""}, "field": "dt", "type": "temporal"}, "y": {"axis": {"title": "Volume [Million short tons]"}, "field": "WATERBORNE", "type": "quantitative"}}, "height": 100, "selection": {"selector002": {"type": "interval", "encodings": ["x"]}}, "width": 750}], "background": "white", "data": {"name": "data-1ef00834fc889bc5e06872ff94a2bcce"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-1ef00834fc889bc5e06872ff94a2bcce": [{"dt": "01/01/2000", "WATERBORNE": 48.4}, {"dt": "02/01/2000", "WATERBORNE": 42.0}, {"dt": "03/01/2000", "WATERBORNE": 52.5}, {"dt": "04/01/2000", "WATERBORNE": 52.2}, {"dt": "05/01/2000", "WATERBORNE": 53.5}, {"dt": "06/01/2000", "WATERBORNE": 50.4}, {"dt": "07/01/2000", "WATERBORNE": 53.3}, {"dt": "08/01/2000", "WATERBORNE": 50.9}, {"dt": "09/01/2000", "WATERBORNE": 47.3}, {"dt": "10/01/2000", "WATERBORNE": 50.8}, {"dt": "11/01/2000", "WATERBORNE": 50.0}, {"dt": "12/01/2000", "WATERBORNE": 41.3}, {"dt": "01/01/2001", "WATERBORNE": 39.3}, {"dt": "02/01/2001", "WATERBORNE": 40.9}, {"dt": "03/01/2001", "WATERBORNE": 47.1}, {"dt": "04/01/2001", "WATERBORNE": 49.4}, {"dt": "05/01/2001", "WATERBORNE": 47.7}, {"dt": "06/01/2001", "WATERBORNE": 50.9}, {"dt": "07/01/2001", "WATERBORNE": 51.2}, {"dt": "08/01/2001", "WATERBORNE": 51.8}, {"dt": "09/01/2001", "WATERBORNE": 47.5}, {"dt": "10/01/2001", "WATERBORNE": 49.9}, {"dt": "11/01/2001", "WATERBORNE": 48.5}, {"dt": "12/01/2001", "WATERBORNE": 46.1}, {"dt": "01/01/2002", "WATERBORNE": 41.3}, {"dt": "02/01/2002", "WATERBORNE": 40.5}, {"dt": "03/01/2002", "WATERBORNE": 45.9}, {"dt": "04/01/2002", "WATERBORNE": 47.2}, {"dt": "05/01/2002", "WATERBORNE": 47.4}, {"dt": "06/01/2002", "WATERBORNE": 48.8}, {"dt": "07/01/2002", "WATERBORNE": 50.9}, {"dt": "08/01/2002", "WATERBORNE": 48.8}, {"dt": "09/01/2002", "WATERBORNE": 44.9}, {"dt": "10/01/2002", "WATERBORNE": 50.3}, {"dt": "11/01/2002", "WATERBORNE": 50.7}, {"dt": "12/01/2002", "WATERBORNE": 46.4}, {"dt": "01/01/2003", "WATERBORNE": 39.7}, {"dt": "02/01/2003", "WATERBORNE": 36.0}, {"dt": "03/01/2003", "WATERBORNE": 45.7}, {"dt": "04/01/2003", "WATERBORNE": 47.5}, {"dt": "05/01/2003", "WATERBORNE": 45.5}, {"dt": "06/01/2003", "WATERBORNE": 46.6}, {"dt": "07/01/2003", "WATERBORNE": 47.9}, {"dt": "08/01/2003", "WATERBORNE": 47.1}, {"dt": "09/01/2003", "WATERBORNE": 43.7}, {"dt": "10/01/2003", "WATERBORNE": 49.6}, {"dt": "11/01/2003", "WATERBORNE": 47.9}, {"dt": "12/01/2003", "WATERBORNE": 50.5}, {"dt": "01/01/2004", "WATERBORNE": 43.6}, {"dt": "02/01/2004", "WATERBORNE": 40.7}, {"dt": "03/01/2004", "WATERBORNE": 47.5}, {"dt": "04/01/2004", "WATERBORNE": 49.2}, {"dt": "05/01/2004", "WATERBORNE": 49.4}, {"dt": "06/01/2004", "WATERBORNE": 48.9}, {"dt": "07/01/2004", "WATERBORNE": 51.1}, {"dt": "08/01/2004", "WATERBORNE": 50.4}, {"dt": "09/01/2004", "WATERBORNE": 43.5}, {"dt": "10/01/2004", "WATERBORNE": 53.2}, {"dt": "11/01/2004", "WATERBORNE": 50.3}, {"dt": "12/01/2004", "WATERBORNE": 48.2}, {"dt": "01/01/2005", "WATERBORNE": 41.0}, {"dt": "02/01/2005", "WATERBORNE": 41.5}, {"dt": "03/01/2005", "WATERBORNE": 51.0}, {"dt": "04/01/2005", "WATERBORNE": 51.0}, {"dt": "05/01/2005", "WATERBORNE": 54.7}, {"dt": "06/01/2005", "WATERBORNE": 49.3}, {"dt": "07/01/2005", "WATERBORNE": 50.5}, {"dt": "08/01/2005", "WATERBORNE": 47.1}, {"dt": "09/01/2005", "WATERBORNE": 36.7}, {"dt": "10/01/2005", "WATERBORNE": 44.8}, {"dt": "11/01/2005", "WATERBORNE": 44.9}, {"dt": "12/01/2005", "WATERBORNE": 43.2}, {"dt": "01/01/2006", "WATERBORNE": 41.1}, {"dt": "02/01/2006", "WATERBORNE": 39.9}, {"dt": "03/01/2006", "WATERBORNE": 50.0}, {"dt": "04/01/2006", "WATERBORNE": 47.1}, {"dt": "05/01/2006", "WATERBORNE": 48.9}, {"dt": "06/01/2006", "WATERBORNE": 48.1}, {"dt": "07/01/2006", "WATERBORNE": 47.7}, {"dt": "08/01/2006", "WATERBORNE": 45.8}, {"dt": "09/01/2006", "WATERBORNE": 46.6}, {"dt": "10/01/2006", "WATERBORNE": 46.0}, {"dt": "11/01/2006", "WATERBORNE": 44.9}, {"dt": "12/01/2006", "WATERBORNE": 44.1}, {"dt": "01/01/2007", "WATERBORNE": 41.7}, {"dt": "02/01/2007", "WATERBORNE": 36.2}, {"dt": "03/01/2007", "WATERBORNE": 47.9}, {"dt": "04/01/2007", "WATERBORNE": 48.1}, {"dt": "05/01/2007", "WATERBORNE": 50.0}, {"dt": "06/01/2007", "WATERBORNE": 48.4}, {"dt": "07/01/2007", "WATERBORNE": 46.1}, {"dt": "08/01/2007", "WATERBORNE": 42.1}, {"dt": "09/01/2007", "WATERBORNE": 40.5}, {"dt": "10/01/2007", "WATERBORNE": 47.1}, {"dt": "11/01/2007", "WATERBORNE": 45.1}, {"dt": "12/01/2007", "WATERBORNE": 43.6}, {"dt": "01/01/2008", "WATERBORNE": 41.4}, {"dt": "02/01/2008", "WATERBORNE": 36.9}, {"dt": "03/01/2008", "WATERBORNE": 38.0}, {"dt": "04/01/2008", "WATERBORNE": 41.4}, {"dt": "05/01/2008", "WATERBORNE": 44.8}, {"dt": "06/01/2008", "WATERBORNE": 39.1}, {"dt": "07/01/2008", "WATERBORNE": 45.1}, {"dt": "08/01/2008", "WATERBORNE": 45.3}, {"dt": "09/01/2008", "WATERBORNE": 36.6}, {"dt": "10/01/2008", "WATERBORNE": 44.2}, {"dt": "11/01/2008", "WATERBORNE": 42.8}, {"dt": "12/01/2008", "WATERBORNE": 36.8}, {"dt": "01/01/2009", "WATERBORNE": 33.5}, {"dt": "02/01/2009", "WATERBORNE": 34.1}, {"dt": "03/01/2009", "WATERBORNE": 37.2}, {"dt": "04/01/2009", "WATERBORNE": 37.1}, {"dt": "05/01/2009", "WATERBORNE": 37.4}, {"dt": "06/01/2009", "WATERBORNE": 41.2}, {"dt": "07/01/2009", "WATERBORNE": 42.2}, {"dt": "08/01/2009", "WATERBORNE": 42.7}, {"dt": "09/01/2009", "WATERBORNE": 33.3}, {"dt": "10/01/2009", "WATERBORNE": 36.5}, {"dt": "11/01/2009", "WATERBORNE": 42.1}, {"dt": "12/01/2009", "WATERBORNE": 37.4}, {"dt": "01/01/2010", "WATERBORNE": 39.8}, {"dt": "02/01/2010", "WATERBORNE": 41.0}, {"dt": "03/01/2010", "WATERBORNE": 46.8}, {"dt": "04/01/2010", "WATERBORNE": 47.4}, {"dt": "05/01/2010", "WATERBORNE": 47.6}, {"dt": "06/01/2010", "WATERBORNE": 48.6}, {"dt": "07/01/2010", "WATERBORNE": 47.4}, {"dt": "08/01/2010", "WATERBORNE": 49.1}, {"dt": "09/01/2010", "WATERBORNE": 46.9}, {"dt": "10/01/2010", "WATERBORNE": 51.0}, {"dt": "11/01/2010", "WATERBORNE": 46.7}, {"dt": "12/01/2010", "WATERBORNE": 44.8}, {"dt": "01/01/2011", "WATERBORNE": 44.9}, {"dt": "02/01/2011", "WATERBORNE": 43.0}, {"dt": "03/01/2011", "WATERBORNE": 44.9}, {"dt": "04/01/2011", "WATERBORNE": 45.4}, {"dt": "05/01/2011", "WATERBORNE": 42.9}, {"dt": "06/01/2011", "WATERBORNE": 47.9}, {"dt": "07/01/2011", "WATERBORNE": 49.9}, {"dt": "08/01/2011", "WATERBORNE": 50.9}, {"dt": "09/01/2011", "WATERBORNE": 47.7}, {"dt": "10/01/2011", "WATERBORNE": 52.1}, {"dt": "11/01/2011", "WATERBORNE": 47.0}, {"dt": "12/01/2011", "WATERBORNE": 45.9}, {"dt": "01/01/2012", "WATERBORNE": 45.7}, {"dt": "02/01/2012", "WATERBORNE": 43.6}, {"dt": "03/01/2012", "WATERBORNE": 47.1}, {"dt": "04/01/2012", "WATERBORNE": 46.9}, {"dt": "05/01/2012", "WATERBORNE": 48.3}, {"dt": "06/01/2012", "WATERBORNE": 46.3}, {"dt": "07/01/2012", "WATERBORNE": 46.6}, {"dt": "08/01/2012", "WATERBORNE": 47.6}, {"dt": "09/01/2012", "WATERBORNE": 45.3}, {"dt": "10/01/2012", "WATERBORNE": 50.6}, {"dt": "11/01/2012", "WATERBORNE": 47.2}, {"dt": "12/01/2012", "WATERBORNE": 47.1}, {"dt": "01/01/2013", "WATERBORNE": 44.2}, {"dt": "02/01/2013", "WATERBORNE": 42.9}, {"dt": "03/01/2013", "WATERBORNE": 48.3}, {"dt": "04/01/2013", "WATERBORNE": 44.6}, {"dt": "05/01/2013", "WATERBORNE": 45.9}, {"dt": "06/01/2013", "WATERBORNE": 48.4}, {"dt": "07/01/2013", "WATERBORNE": 47.4}, {"dt": "08/01/2013", "WATERBORNE": 49.1}, {"dt": "09/01/2013", "WATERBORNE": 45.4}, {"dt": "10/01/2013", "WATERBORNE": 50.3}, {"dt": "11/01/2013", "WATERBORNE": 46.6}, {"dt": "12/01/2013", "WATERBORNE": 44.9}, {"dt": "01/01/2014", "WATERBORNE": 44.5}, {"dt": "02/01/2014", "WATERBORNE": 41.6}, {"dt": "03/01/2014", "WATERBORNE": 50.8}, {"dt": "04/01/2014", "WATERBORNE": 50.4}, {"dt": "05/01/2014", "WATERBORNE": 51.8}, {"dt": "06/01/2014", "WATERBORNE": 49.9}, {"dt": "07/01/2014", "WATERBORNE": 50.3}, {"dt": "08/01/2014", "WATERBORNE": 51.0}, {"dt": "09/01/2014", "WATERBORNE": 52.9}, {"dt": "10/01/2014", "WATERBORNE": 56.1}, {"dt": "11/01/2014", "WATERBORNE": 51.2}, {"dt": "12/01/2014", "WATERBORNE": 51.2}, {"dt": "01/01/2015", "WATERBORNE": 48.4}, {"dt": "02/01/2015", "WATERBORNE": 42.0}, {"dt": "03/01/2015", "WATERBORNE": 41.0}, {"dt": "04/01/2015", "WATERBORNE": 46.3}, {"dt": "05/01/2015", "WATERBORNE": 49.6}, {"dt": "06/01/2015", "WATERBORNE": 47.4}, {"dt": "07/01/2015", "WATERBORNE": 47.8}, {"dt": "08/01/2015", "WATERBORNE": 51.5}, {"dt": "09/01/2015", "WATERBORNE": 49.6}, {"dt": "10/01/2015", "WATERBORNE": 50.5}, {"dt": "11/01/2015", "WATERBORNE": 48.2}, {"dt": "12/01/2015", "WATERBORNE": 44.1}, {"dt": "01/01/2016", "WATERBORNE": 39.8}, {"dt": "02/01/2016", "WATERBORNE": 42.9}, {"dt": "03/01/2016", "WATERBORNE": 44.2}, {"dt": "04/01/2016", "WATERBORNE": 45.1}, {"dt": "05/01/2016", "WATERBORNE": 46.4}, {"dt": "06/01/2016", "WATERBORNE": 44.9}, {"dt": "07/01/2016", "WATERBORNE": 47.0}, {"dt": "08/01/2016", "WATERBORNE": 49.4}, {"dt": "09/01/2016", "WATERBORNE": 47.5}, {"dt": "10/01/2016", "WATERBORNE": 49.9}, {"dt": "11/01/2016", "WATERBORNE": 46.1}, {"dt": "12/01/2016", "WATERBORNE": 44.9}, {"dt": "01/01/2017", "WATERBORNE": 43.9}, {"dt": "02/01/2017", "WATERBORNE": 43.0}, {"dt": "03/01/2017", "WATERBORNE": 47.7}, {"dt": "04/01/2017", "WATERBORNE": 44.1}, {"dt": "05/01/2017", "WATERBORNE": 42.6}, {"dt": "06/01/2017", "WATERBORNE": 44.7}, {"dt": "07/01/2017", "WATERBORNE": 45.7}, {"dt": "08/01/2017", "WATERBORNE": 47.0}, {"dt": "09/01/2017", "WATERBORNE": 44.0}, {"dt": "10/01/2017", "WATERBORNE": 45.7}, {"dt": "11/01/2017", "WATERBORNE": 46.6}, {"dt": "12/01/2017", "WATERBORNE": 43.9}, {"dt": "01/01/2018", "WATERBORNE": 45.0}, {"dt": "02/01/2018", "WATERBORNE": 43.9}, {"dt": "03/01/2018", "WATERBORNE": 49.8}, {"dt": "04/01/2018", "WATERBORNE": 52.5}, {"dt": "05/01/2018", "WATERBORNE": 54.2}, {"dt": "06/01/2018", "WATERBORNE": 53.8}, {"dt": "07/01/2018", "WATERBORNE": 49.8}, {"dt": "08/01/2018", "WATERBORNE": 52.0}, {"dt": "09/01/2018", "WATERBORNE": 50.3}, {"dt": "10/01/2018", "WATERBORNE": 56.2}, {"dt": "11/01/2018", "WATERBORNE": 50.2}, {"dt": "12/01/2018", "WATERBORNE": 50.2}, {"dt": "01/01/2019", "WATERBORNE": 43.2}, {"dt": "02/01/2019", "WATERBORNE": 33.8}, {"dt": "03/01/2019", "WATERBORNE": 39.2}, {"dt": "04/01/2019", "WATERBORNE": 42.9}, {"dt": "05/01/2019", "WATERBORNE": 41.5}, {"dt": "06/01/2019", "WATERBORNE": 37.1}, {"dt": "07/01/2019", "WATERBORNE": 43.1}, {"dt": "08/01/2019", "WATERBORNE": 47.9}, {"dt": "09/01/2019", "WATERBORNE": 43.2}, {"dt": "10/01/2019", "WATERBORNE": 45.5}, {"dt": "11/01/2019", "WATERBORNE": 43.0}, {"dt": "12/01/2019", "WATERBORNE": 43.4}, {"dt": "01/01/2020", "WATERBORNE": 40.8}, {"dt": "02/01/2020", "WATERBORNE": 37.0}, {"dt": "03/01/2020", "WATERBORNE": 40.3}, {"dt": "04/01/2020", "WATERBORNE": 39.3}, {"dt": "05/01/2020", "WATERBORNE": 36.9}, {"dt": "06/01/2020", "WATERBORNE": 38.6}, {"dt": "07/01/2020", "WATERBORNE": 39.5}, {"dt": "08/01/2020", "WATERBORNE": 38.0}, {"dt": "09/01/2020", "WATERBORNE": 37.1}, {"dt": "10/01/2020", "WATERBORNE": 40.1}, {"dt": "11/01/2020", "WATERBORNE": 40.4}, {"dt": "12/01/2020", "WATERBORNE": 40.8}, {"dt": "01/01/2021", "WATERBORNE": 45.5}, {"dt": "02/01/2021", "WATERBORNE": 39.8}, {"dt": "03/01/2021", "WATERBORNE": 47.6}, {"dt": "04/01/2021", "WATERBORNE": 47.4}, {"dt": "05/01/2021", "WATERBORNE": 49.4}, {"dt": "06/01/2021", "WATERBORNE": 50.4}, {"dt": "07/01/2021", "WATERBORNE": 47.2}, {"dt": "08/01/2021", "WATERBORNE": 46.8}, {"dt": "09/01/2021", "WATERBORNE": 42.8}, {"dt": "10/01/2021", "WATERBORNE": 51.8}, {"dt": "11/01/2021", "WATERBORNE": 52.1}, {"dt": "12/01/2021", "WATERBORNE": 48.1}, {"dt": "01/01/2022", "WATERBORNE": 48.1}, {"dt": "02/01/2022", "WATERBORNE": 42.3}, {"dt": "03/01/2022", "WATERBORNE": 49.7}, {"dt": "04/01/2022", "WATERBORNE": 51.6}, {"dt": "05/01/2022", "WATERBORNE": 52.3}, {"dt": "06/01/2022", "WATERBORNE": 54.4}, {"dt": "07/01/2022", "WATERBORNE": 55.0}, {"dt": "08/01/2022", "WATERBORNE": 56.3}, {"dt": "09/01/2022", "WATERBORNE": 50.2}, {"dt": "10/01/2022", "WATERBORNE": 52.7}, {"dt": "11/01/2022", "WATERBORNE": 50.3}, {"dt": "12/01/2022", "WATERBORNE": 48.3}, {"dt": "01/01/2023", "WATERBORNE": 47.5}]}}, {"mode": "vega-lite"});
</script></div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Rail-Freight-Carloads">Rail Freight Carloads<a class="anchor-link" href="#Rail-Freight-Carloads">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doComboChart</span><span class="p">(</span><span class="n">df_af</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;RAIL_FRT_CARLOADS&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;US Rail Freight Carloads&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Carloads&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">
<div id="altair-viz-f236caa8867e4e1b963c882ad46c367d"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-f236caa8867e4e1b963c882ad46c367d") {
      outputDiv = document.getElementById("altair-viz-f236caa8867e4e1b963c882ad46c367d");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "4.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "vconcat": [{"mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['yoy'] < 0"}, "value": "royalblue"}, "tooltip": [{"field": "dt", "format": "%b %Y", "type": "temporal"}, {"field": "RAIL_FRT_CARLOADS", "format": ",.02f", "type": "quantitative"}], "x": {"axis": {"title": ""}, "field": "dt", "impute": {"value": null}, "scale": {"domain": {"selection": "selector003"}}, "type": "temporal"}, "y": {"axis": {"title": "Year-over-Year Growth [%]"}, "field": "yoy", "impute": {"keyvals": [400, 1000], "method": "value"}, "type": "quantitative"}}, "height": 400, "title": "US Rail Freight Carloads", "transform": [{"window": [{"op": "lag", "field": "RAIL_FRT_CARLOADS", "param": 12, "as": "previous"}], "sort": [{"field": "dt"}]}, {"calculate": "((datum['RAIL_FRT_CARLOADS'] - datum.previous) / datum.previous) * 100", "as": "yoy"}], "width": 750}, {"mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"field": "dt", "format": "%b %Y", "type": "temporal"}, {"field": "RAIL_FRT_CARLOADS", "format": ",.02f", "type": "quantitative"}], "x": {"axis": {"title": ""}, "field": "dt", "type": "temporal"}, "y": {"axis": {"title": "Carloads"}, "field": "RAIL_FRT_CARLOADS", "type": "quantitative"}}, "height": 100, "selection": {"selector003": {"type": "interval", "encodings": ["x"]}}, "width": 750}], "background": "white", "data": {"name": "data-a0cf9566250faf8ee54864bbd383c3da"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-a0cf9566250faf8ee54864bbd383c3da": [{"dt": "01/01/2000", "RAIL_FRT_CARLOADS": 1402925.9}, {"dt": "02/01/2000", "RAIL_FRT_CARLOADS": 1341941.6}, {"dt": "03/01/2000", "RAIL_FRT_CARLOADS": 1452147.4}, {"dt": "04/01/2000", "RAIL_FRT_CARLOADS": 1386029.9}, {"dt": "05/01/2000", "RAIL_FRT_CARLOADS": 1440661.0}, {"dt": "06/01/2000", "RAIL_FRT_CARLOADS": 1390222.3}, {"dt": "07/01/2000", "RAIL_FRT_CARLOADS": 1377789.6}, {"dt": "08/01/2000", "RAIL_FRT_CARLOADS": 1473014.0}, {"dt": "09/01/2000", "RAIL_FRT_CARLOADS": 1427099.4}, {"dt": "10/01/2000", "RAIL_FRT_CARLOADS": 1489124.6}, {"dt": "11/01/2000", "RAIL_FRT_CARLOADS": 1346908.7}, {"dt": "12/01/2000", "RAIL_FRT_CARLOADS": 1298608.9}, {"dt": "01/01/2001", "RAIL_FRT_CARLOADS": 1378714.7}, {"dt": "02/01/2001", "RAIL_FRT_CARLOADS": 1272599.0}, {"dt": "03/01/2001", "RAIL_FRT_CARLOADS": 1457199.1}, {"dt": "04/01/2001", "RAIL_FRT_CARLOADS": 1390615.4}, {"dt": "05/01/2001", "RAIL_FRT_CARLOADS": 1436952.6}, {"dt": "06/01/2001", "RAIL_FRT_CARLOADS": 1382844.0}, {"dt": "07/01/2001", "RAIL_FRT_CARLOADS": 1331668.6}, {"dt": "08/01/2001", "RAIL_FRT_CARLOADS": 1444314.0}, {"dt": "09/01/2001", "RAIL_FRT_CARLOADS": 1387189.4}, {"dt": "10/01/2001", "RAIL_FRT_CARLOADS": 1489177.7}, {"dt": "11/01/2001", "RAIL_FRT_CARLOADS": 1376610.6}, {"dt": "12/01/2001", "RAIL_FRT_CARLOADS": 1323085.1}, {"dt": "01/01/2002", "RAIL_FRT_CARLOADS": 1362045.1}, {"dt": "02/01/2002", "RAIL_FRT_CARLOADS": 1252632.4}, {"dt": "03/01/2002", "RAIL_FRT_CARLOADS": 1373142.6}, {"dt": "04/01/2002", "RAIL_FRT_CARLOADS": 1359576.1}, {"dt": "05/01/2002", "RAIL_FRT_CARLOADS": 1408401.3}, {"dt": "06/01/2002", "RAIL_FRT_CARLOADS": 1392903.3}, {"dt": "07/01/2002", "RAIL_FRT_CARLOADS": 1363443.1}, {"dt": "08/01/2002", "RAIL_FRT_CARLOADS": 1467851.6}, {"dt": "09/01/2002", "RAIL_FRT_CARLOADS": 1395756.6}, {"dt": "10/01/2002", "RAIL_FRT_CARLOADS": 1462330.0}, {"dt": "11/01/2002", "RAIL_FRT_CARLOADS": 1359625.4}, {"dt": "12/01/2002", "RAIL_FRT_CARLOADS": 1326501.0}, {"dt": "01/01/2003", "RAIL_FRT_CARLOADS": 1348630.9}, {"dt": "02/01/2003", "RAIL_FRT_CARLOADS": 1232969.9}, {"dt": "03/01/2003", "RAIL_FRT_CARLOADS": 1400506.1}, {"dt": "04/01/2003", "RAIL_FRT_CARLOADS": 1362930.4}, {"dt": "05/01/2003", "RAIL_FRT_CARLOADS": 1402691.7}, {"dt": "06/01/2003", "RAIL_FRT_CARLOADS": 1370794.4}, {"dt": "07/01/2003", "RAIL_FRT_CARLOADS": 1357086.3}, {"dt": "08/01/2003", "RAIL_FRT_CARLOADS": 1450002.7}, {"dt": "09/01/2003", "RAIL_FRT_CARLOADS": 1410429.4}, {"dt": "10/01/2003", "RAIL_FRT_CARLOADS": 1491288.7}, {"dt": "11/01/2003", "RAIL_FRT_CARLOADS": 1380232.6}, {"dt": "12/01/2003", "RAIL_FRT_CARLOADS": 1349155.4}, {"dt": "01/01/2004", "RAIL_FRT_CARLOADS": 1391261.4}, {"dt": "02/01/2004", "RAIL_FRT_CARLOADS": 1318895.0}, {"dt": "03/01/2004", "RAIL_FRT_CARLOADS": 1460106.9}, {"dt": "04/01/2004", "RAIL_FRT_CARLOADS": 1422510.6}, {"dt": "05/01/2004", "RAIL_FRT_CARLOADS": 1475594.1}, {"dt": "06/01/2004", "RAIL_FRT_CARLOADS": 1411046.6}, {"dt": "07/01/2004", "RAIL_FRT_CARLOADS": 1405129.9}, {"dt": "08/01/2004", "RAIL_FRT_CARLOADS": 1478446.1}, {"dt": "09/01/2004", "RAIL_FRT_CARLOADS": 1408654.3}, {"dt": "10/01/2004", "RAIL_FRT_CARLOADS": 1509118.7}, {"dt": "11/01/2004", "RAIL_FRT_CARLOADS": 1408453.3}, {"dt": "12/01/2004", "RAIL_FRT_CARLOADS": 1367588.9}, {"dt": "01/01/2005", "RAIL_FRT_CARLOADS": 1396793.1}, {"dt": "02/01/2005", "RAIL_FRT_CARLOADS": 1342757.4}, {"dt": "03/01/2005", "RAIL_FRT_CARLOADS": 1493051.7}, {"dt": "04/01/2005", "RAIL_FRT_CARLOADS": 1460039.4}, {"dt": "05/01/2005", "RAIL_FRT_CARLOADS": 1466477.0}, {"dt": "06/01/2005", "RAIL_FRT_CARLOADS": 1412639.9}, {"dt": "07/01/2005", "RAIL_FRT_CARLOADS": 1404878.7}, {"dt": "08/01/2005", "RAIL_FRT_CARLOADS": 1485201.4}, {"dt": "09/01/2005", "RAIL_FRT_CARLOADS": 1438698.1}, {"dt": "10/01/2005", "RAIL_FRT_CARLOADS": 1470099.3}, {"dt": "11/01/2005", "RAIL_FRT_CARLOADS": 1392562.4}, {"dt": "12/01/2005", "RAIL_FRT_CARLOADS": 1375654.1}, {"dt": "01/01/2006", "RAIL_FRT_CARLOADS": 1464556.4}, {"dt": "02/01/2006", "RAIL_FRT_CARLOADS": 1312499.6}, {"dt": "03/01/2006", "RAIL_FRT_CARLOADS": 1493546.6}, {"dt": "04/01/2006", "RAIL_FRT_CARLOADS": 1446163.6}, {"dt": "05/01/2006", "RAIL_FRT_CARLOADS": 1521036.3}, {"dt": "06/01/2006", "RAIL_FRT_CARLOADS": 1464781.1}, {"dt": "07/01/2006", "RAIL_FRT_CARLOADS": 1428970.4}, {"dt": "08/01/2006", "RAIL_FRT_CARLOADS": 1501964.4}, {"dt": "09/01/2006", "RAIL_FRT_CARLOADS": 1445001.6}, {"dt": "10/01/2006", "RAIL_FRT_CARLOADS": 1493349.4}, {"dt": "11/01/2006", "RAIL_FRT_CARLOADS": 1378183.1}, {"dt": "12/01/2006", "RAIL_FRT_CARLOADS": 1398361.0}, {"dt": "01/01/2007", "RAIL_FRT_CARLOADS": 1370575.1}, {"dt": "02/01/2007", "RAIL_FRT_CARLOADS": 1255311.1}, {"dt": "03/01/2007", "RAIL_FRT_CARLOADS": 1442822.1}, {"dt": "04/01/2007", "RAIL_FRT_CARLOADS": 1413587.4}, {"dt": "05/01/2007", "RAIL_FRT_CARLOADS": 1446592.4}, {"dt": "06/01/2007", "RAIL_FRT_CARLOADS": 1429982.1}, {"dt": "07/01/2007", "RAIL_FRT_CARLOADS": 1391259.9}, {"dt": "08/01/2007", "RAIL_FRT_CARLOADS": 1485341.7}, {"dt": "09/01/2007", "RAIL_FRT_CARLOADS": 1431665.9}, {"dt": "10/01/2007", "RAIL_FRT_CARLOADS": 1487802.9}, {"dt": "11/01/2007", "RAIL_FRT_CARLOADS": 1412570.6}, {"dt": "12/01/2007", "RAIL_FRT_CARLOADS": 1357745.9}, {"dt": "01/01/2008", "RAIL_FRT_CARLOADS": 1387897.4}, {"dt": "02/01/2008", "RAIL_FRT_CARLOADS": 1335398.3}, {"dt": "03/01/2008", "RAIL_FRT_CARLOADS": 1445693.1}, {"dt": "04/01/2008", "RAIL_FRT_CARLOADS": 1423938.6}, {"dt": "05/01/2008", "RAIL_FRT_CARLOADS": 1451559.9}, {"dt": "06/01/2008", "RAIL_FRT_CARLOADS": 1372685.6}, {"dt": "07/01/2008", "RAIL_FRT_CARLOADS": 1422554.4}, {"dt": "08/01/2008", "RAIL_FRT_CARLOADS": 1474208.6}, {"dt": "09/01/2008", "RAIL_FRT_CARLOADS": 1373619.9}, {"dt": "10/01/2008", "RAIL_FRT_CARLOADS": 1445066.3}, {"dt": "11/01/2008", "RAIL_FRT_CARLOADS": 1274530.6}, {"dt": "12/01/2008", "RAIL_FRT_CARLOADS": 1153402.9}, {"dt": "01/01/2009", "RAIL_FRT_CARLOADS": 1162972.9}, {"dt": "02/01/2009", "RAIL_FRT_CARLOADS": 1105996.0}, {"dt": "03/01/2009", "RAIL_FRT_CARLOADS": 1193910.4}, {"dt": "04/01/2009", "RAIL_FRT_CARLOADS": 1095354.4}, {"dt": "05/01/2009", "RAIL_FRT_CARLOADS": 1105635.4}, {"dt": "06/01/2009", "RAIL_FRT_CARLOADS": 1105097.6}, {"dt": "07/01/2009", "RAIL_FRT_CARLOADS": 1176456.7}, {"dt": "08/01/2009", "RAIL_FRT_CARLOADS": 1236763.9}, {"dt": "09/01/2009", "RAIL_FRT_CARLOADS": 1180774.6}, {"dt": "10/01/2009", "RAIL_FRT_CARLOADS": 1220057.0}, {"dt": "11/01/2009", "RAIL_FRT_CARLOADS": 1169623.1}, {"dt": "12/01/2009", "RAIL_FRT_CARLOADS": 1095082.0}, {"dt": "01/01/2010", "RAIL_FRT_CARLOADS": 1160442.3}, {"dt": "02/01/2010", "RAIL_FRT_CARLOADS": 1091829.1}, {"dt": "03/01/2010", "RAIL_FRT_CARLOADS": 1279723.7}, {"dt": "04/01/2010", "RAIL_FRT_CARLOADS": 1260953.7}, {"dt": "05/01/2010", "RAIL_FRT_CARLOADS": 1272845.3}, {"dt": "06/01/2010", "RAIL_FRT_CARLOADS": 1215863.7}, {"dt": "07/01/2010", "RAIL_FRT_CARLOADS": 1244915.0}, {"dt": "08/01/2010", "RAIL_FRT_CARLOADS": 1310409.6}, {"dt": "09/01/2010", "RAIL_FRT_CARLOADS": 1271475.3}, {"dt": "10/01/2010", "RAIL_FRT_CARLOADS": 1322853.4}, {"dt": "11/01/2010", "RAIL_FRT_CARLOADS": 1227151.0}, {"dt": "12/01/2010", "RAIL_FRT_CARLOADS": 1195310.6}, {"dt": "01/01/2011", "RAIL_FRT_CARLOADS": 1254584.9}, {"dt": "02/01/2011", "RAIL_FRT_CARLOADS": 1146299.7}, {"dt": "03/01/2011", "RAIL_FRT_CARLOADS": 1320070.1}, {"dt": "04/01/2011", "RAIL_FRT_CARLOADS": 1264678.4}, {"dt": "05/01/2011", "RAIL_FRT_CARLOADS": 1276671.3}, {"dt": "06/01/2011", "RAIL_FRT_CARLOADS": 1229631.7}, {"dt": "07/01/2011", "RAIL_FRT_CARLOADS": 1234425.9}, {"dt": "08/01/2011", "RAIL_FRT_CARLOADS": 1312455.6}, {"dt": "09/01/2011", "RAIL_FRT_CARLOADS": 1280971.9}, {"dt": "10/01/2011", "RAIL_FRT_CARLOADS": 1345498.4}, {"dt": "11/01/2011", "RAIL_FRT_CARLOADS": 1257921.0}, {"dt": "12/01/2011", "RAIL_FRT_CARLOADS": 1268018.3}, {"dt": "01/01/2012", "RAIL_FRT_CARLOADS": 1267255.6}, {"dt": "02/01/2012", "RAIL_FRT_CARLOADS": 1167609.7}, {"dt": "03/01/2012", "RAIL_FRT_CARLOADS": 1244738.7}, {"dt": "04/01/2012", "RAIL_FRT_CARLOADS": 1192249.7}, {"dt": "05/01/2012", "RAIL_FRT_CARLOADS": 1237395.3}, {"dt": "06/01/2012", "RAIL_FRT_CARLOADS": 1216288.0}, {"dt": "07/01/2012", "RAIL_FRT_CARLOADS": 1227467.7}, {"dt": "08/01/2012", "RAIL_FRT_CARLOADS": 1296307.4}, {"dt": "09/01/2012", "RAIL_FRT_CARLOADS": 1234535.0}, {"dt": "10/01/2012", "RAIL_FRT_CARLOADS": 1262848.1}, {"dt": "11/01/2012", "RAIL_FRT_CARLOADS": 1205969.4}, {"dt": "12/01/2012", "RAIL_FRT_CARLOADS": 1201630.0}, {"dt": "01/01/2013", "RAIL_FRT_CARLOADS": 1192314.1}, {"dt": "02/01/2013", "RAIL_FRT_CARLOADS": 1110547.9}, {"dt": "03/01/2013", "RAIL_FRT_CARLOADS": 1239149.1}, {"dt": "04/01/2013", "RAIL_FRT_CARLOADS": 1190406.0}, {"dt": "05/01/2013", "RAIL_FRT_CARLOADS": 1241623.6}, {"dt": "06/01/2013", "RAIL_FRT_CARLOADS": 1210146.0}, {"dt": "07/01/2013", "RAIL_FRT_CARLOADS": 1226158.3}, {"dt": "08/01/2013", "RAIL_FRT_CARLOADS": 1301948.3}, {"dt": "09/01/2013", "RAIL_FRT_CARLOADS": 1239309.4}, {"dt": "10/01/2013", "RAIL_FRT_CARLOADS": 1280690.0}, {"dt": "11/01/2013", "RAIL_FRT_CARLOADS": 1229054.6}, {"dt": "12/01/2013", "RAIL_FRT_CARLOADS": 1184767.6}, {"dt": "01/01/2014", "RAIL_FRT_CARLOADS": 1201519.9}, {"dt": "02/01/2014", "RAIL_FRT_CARLOADS": 1098607.3}, {"dt": "03/01/2014", "RAIL_FRT_CARLOADS": 1282488.1}, {"dt": "04/01/2014", "RAIL_FRT_CARLOADS": 1269684.1}, {"dt": "05/01/2014", "RAIL_FRT_CARLOADS": 1313273.0}, {"dt": "06/01/2014", "RAIL_FRT_CARLOADS": 1255383.1}, {"dt": "07/01/2014", "RAIL_FRT_CARLOADS": 1307466.6}, {"dt": "08/01/2014", "RAIL_FRT_CARLOADS": 1339869.0}, {"dt": "09/01/2014", "RAIL_FRT_CARLOADS": 1278100.1}, {"dt": "10/01/2014", "RAIL_FRT_CARLOADS": 1335831.7}, {"dt": "11/01/2014", "RAIL_FRT_CARLOADS": 1250050.3}, {"dt": "12/01/2014", "RAIL_FRT_CARLOADS": 1288684.1}, {"dt": "01/01/2015", "RAIL_FRT_CARLOADS": 1272443.0}, {"dt": "02/01/2015", "RAIL_FRT_CARLOADS": 1089174.0}, {"dt": "03/01/2015", "RAIL_FRT_CARLOADS": 1236088.0}, {"dt": "04/01/2015", "RAIL_FRT_CARLOADS": 1202758.4}, {"dt": "05/01/2015", "RAIL_FRT_CARLOADS": 1192698.6}, {"dt": "06/01/2015", "RAIL_FRT_CARLOADS": 1156484.7}, {"dt": "07/01/2015", "RAIL_FRT_CARLOADS": 1227312.1}, {"dt": "08/01/2015", "RAIL_FRT_CARLOADS": 1279486.4}, {"dt": "09/01/2015", "RAIL_FRT_CARLOADS": 1211040.6}, {"dt": "10/01/2015", "RAIL_FRT_CARLOADS": 1249083.1}, {"dt": "11/01/2015", "RAIL_FRT_CARLOADS": 1119467.0}, {"dt": "12/01/2015", "RAIL_FRT_CARLOADS": 1082286.6}, {"dt": "01/01/2016", "RAIL_FRT_CARLOADS": 1062111.9}, {"dt": "02/01/2016", "RAIL_FRT_CARLOADS": 1014984.9}, {"dt": "03/01/2016", "RAIL_FRT_CARLOADS": 1057653.7}, {"dt": "04/01/2016", "RAIL_FRT_CARLOADS": 1012381.0}, {"dt": "05/01/2016", "RAIL_FRT_CARLOADS": 1058599.9}, {"dt": "06/01/2016", "RAIL_FRT_CARLOADS": 1073479.1}, {"dt": "07/01/2016", "RAIL_FRT_CARLOADS": 1139143.0}, {"dt": "08/01/2016", "RAIL_FRT_CARLOADS": 1192601.6}, {"dt": "09/01/2016", "RAIL_FRT_CARLOADS": 1146142.1}, {"dt": "10/01/2016", "RAIL_FRT_CARLOADS": 1184051.6}, {"dt": "11/01/2016", "RAIL_FRT_CARLOADS": 1123869.6}, {"dt": "12/01/2016", "RAIL_FRT_CARLOADS": 1091370.1}, {"dt": "01/01/2017", "RAIL_FRT_CARLOADS": 1106214.9}, {"dt": "02/01/2017", "RAIL_FRT_CARLOADS": 1035202.0}, {"dt": "03/01/2017", "RAIL_FRT_CARLOADS": 1126911.9}, {"dt": "04/01/2017", "RAIL_FRT_CARLOADS": 1089555.9}, {"dt": "05/01/2017", "RAIL_FRT_CARLOADS": 1134833.9}, {"dt": "06/01/2017", "RAIL_FRT_CARLOADS": 1129102.6}, {"dt": "07/01/2017", "RAIL_FRT_CARLOADS": 1129178.7}, {"dt": "08/01/2017", "RAIL_FRT_CARLOADS": 1184964.7}, {"dt": "09/01/2017", "RAIL_FRT_CARLOADS": 1113056.6}, {"dt": "10/01/2017", "RAIL_FRT_CARLOADS": 1173743.0}, {"dt": "11/01/2017", "RAIL_FRT_CARLOADS": 1106643.6}, {"dt": "12/01/2017", "RAIL_FRT_CARLOADS": 1102229.1}, {"dt": "01/01/2018", "RAIL_FRT_CARLOADS": 1074022.0}, {"dt": "02/01/2018", "RAIL_FRT_CARLOADS": 1028162.9}, {"dt": "03/01/2018", "RAIL_FRT_CARLOADS": 1164406.4}, {"dt": "04/01/2018", "RAIL_FRT_CARLOADS": 1126656.9}, {"dt": "05/01/2018", "RAIL_FRT_CARLOADS": 1171732.9}, {"dt": "06/01/2018", "RAIL_FRT_CARLOADS": 1152587.3}, {"dt": "07/01/2018", "RAIL_FRT_CARLOADS": 1168482.0}, {"dt": "08/01/2018", "RAIL_FRT_CARLOADS": 1226049.0}, {"dt": "09/01/2018", "RAIL_FRT_CARLOADS": 1145300.9}, {"dt": "10/01/2018", "RAIL_FRT_CARLOADS": 1183162.6}, {"dt": "11/01/2018", "RAIL_FRT_CARLOADS": 1109138.7}, {"dt": "12/01/2018", "RAIL_FRT_CARLOADS": 1124343.3}, {"dt": "01/01/2019", "RAIL_FRT_CARLOADS": 1106094.7}, {"dt": "02/01/2019", "RAIL_FRT_CARLOADS": 997818.0}, {"dt": "03/01/2019", "RAIL_FRT_CARLOADS": 1064444.4}, {"dt": "04/01/2019", "RAIL_FRT_CARLOADS": 1120790.0}, {"dt": "05/01/2019", "RAIL_FRT_CARLOADS": 1142717.1}, {"dt": "06/01/2019", "RAIL_FRT_CARLOADS": 1088709.6}, {"dt": "07/01/2019", "RAIL_FRT_CARLOADS": 1118656.3}, {"dt": "08/01/2019", "RAIL_FRT_CARLOADS": 1169165.4}, {"dt": "09/01/2019", "RAIL_FRT_CARLOADS": 1063190.7}, {"dt": "10/01/2019", "RAIL_FRT_CARLOADS": 1083582.3}, {"dt": "11/01/2019", "RAIL_FRT_CARLOADS": 1025480.0}, {"dt": "12/01/2019", "RAIL_FRT_CARLOADS": 1020830.0}, {"dt": "01/01/2020", "RAIL_FRT_CARLOADS": 1038813.1}, {"dt": "02/01/2020", "RAIL_FRT_CARLOADS": 962056.9}, {"dt": "03/01/2020", "RAIL_FRT_CARLOADS": 989918.6}, {"dt": "04/01/2020", "RAIL_FRT_CARLOADS": 836433.4}, {"dt": "05/01/2020", "RAIL_FRT_CARLOADS": 821331.3}, {"dt": "06/01/2020", "RAIL_FRT_CARLOADS": 849366.0}, {"dt": "07/01/2020", "RAIL_FRT_CARLOADS": 927800.1}, {"dt": "08/01/2020", "RAIL_FRT_CARLOADS": 992609.9}, {"dt": "09/01/2020", "RAIL_FRT_CARLOADS": 956718.9}, {"dt": "10/01/2020", "RAIL_FRT_CARLOADS": 1012031.9}, {"dt": "11/01/2020", "RAIL_FRT_CARLOADS": 969903.3}, {"dt": "12/01/2020", "RAIL_FRT_CARLOADS": 973999.3}, {"dt": "01/01/2021", "RAIL_FRT_CARLOADS": 1020270.4}, {"dt": "02/01/2021", "RAIL_FRT_CARLOADS": 825663.6}, {"dt": "03/01/2021", "RAIL_FRT_CARLOADS": 1024083.9}, {"dt": "04/01/2021", "RAIL_FRT_CARLOADS": 1015991.6}, {"dt": "05/01/2021", "RAIL_FRT_CARLOADS": 1064035.0}, {"dt": "06/01/2021", "RAIL_FRT_CARLOADS": 1008919.3}, {"dt": "07/01/2021", "RAIL_FRT_CARLOADS": 1006271.7}, {"dt": "08/01/2021", "RAIL_FRT_CARLOADS": 1032285.7}, {"dt": "09/01/2021", "RAIL_FRT_CARLOADS": 1000693.6}, {"dt": "10/01/2021", "RAIL_FRT_CARLOADS": 1049746.3}, {"dt": "11/01/2021", "RAIL_FRT_CARLOADS": 993789.4}, {"dt": "12/01/2021", "RAIL_FRT_CARLOADS": 996957.9}, {"dt": "01/01/2022", "RAIL_FRT_CARLOADS": 995741.9}, {"dt": "02/01/2022", "RAIL_FRT_CARLOADS": 926927.9}, {"dt": "03/01/2022", "RAIL_FRT_CARLOADS": 1040568.3}, {"dt": "04/01/2022", "RAIL_FRT_CARLOADS": 986098.1}, {"dt": "05/01/2022", "RAIL_FRT_CARLOADS": 1025945.0}, {"dt": "06/01/2022", "RAIL_FRT_CARLOADS": 993991.6}, {"dt": "07/01/2022", "RAIL_FRT_CARLOADS": 1006859.4}, {"dt": "08/01/2022", "RAIL_FRT_CARLOADS": 1053482.6}, {"dt": "09/01/2022", "RAIL_FRT_CARLOADS": 998571.9}, {"dt": "10/01/2022", "RAIL_FRT_CARLOADS": 1055070.0}, {"dt": "11/01/2022", "RAIL_FRT_CARLOADS": 989811.0}, {"dt": "12/01/2022", "RAIL_FRT_CARLOADS": 945588.3}, {"dt": "01/01/2023", "RAIL_FRT_CARLOADS": 1016567.4}]}}, {"mode": "vega-lite"});
</script></div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Rail-Freight-Intermodal">Rail Freight Intermodal<a class="anchor-link" href="#Rail-Freight-Intermodal">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doComboChart</span><span class="p">(</span><span class="n">df_af</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;RAIL_FRT_INTERMODAL&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;US Rail Freight Intermodal&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Carloads&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">
<div id="altair-viz-24e5805875b541869cf8bd45511afa15"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-24e5805875b541869cf8bd45511afa15") {
      outputDiv = document.getElementById("altair-viz-24e5805875b541869cf8bd45511afa15");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "4.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "vconcat": [{"mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['yoy'] < 0"}, "value": "royalblue"}, "tooltip": [{"field": "dt", "format": "%b %Y", "type": "temporal"}, {"field": "RAIL_FRT_INTERMODAL", "format": ",.02f", "type": "quantitative"}], "x": {"axis": {"title": ""}, "field": "dt", "impute": {"value": null}, "scale": {"domain": {"selection": "selector004"}}, "type": "temporal"}, "y": {"axis": {"title": "Year-over-Year Growth [%]"}, "field": "yoy", "impute": {"keyvals": [400, 1000], "method": "value"}, "type": "quantitative"}}, "height": 400, "title": "US Rail Freight Intermodal", "transform": [{"window": [{"op": "lag", "field": "RAIL_FRT_INTERMODAL", "param": 12, "as": "previous"}], "sort": [{"field": "dt"}]}, {"calculate": "((datum['RAIL_FRT_INTERMODAL'] - datum.previous) / datum.previous) * 100", "as": "yoy"}], "width": 750}, {"mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"field": "dt", "format": "%b %Y", "type": "temporal"}, {"field": "RAIL_FRT_INTERMODAL", "format": ",.02f", "type": "quantitative"}], "x": {"axis": {"title": ""}, "field": "dt", "type": "temporal"}, "y": {"axis": {"title": "Carloads"}, "field": "RAIL_FRT_INTERMODAL", "type": "quantitative"}}, "height": 100, "selection": {"selector004": {"type": "interval", "encodings": ["x"]}}, "width": 750}], "background": "white", "data": {"name": "data-0b683dd60b033e7f1659039963598058"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-0b683dd60b033e7f1659039963598058": [{"dt": "01/01/2000", "RAIL_FRT_INTERMODAL": 723746.9}, {"dt": "02/01/2000", "RAIL_FRT_INTERMODAL": 710611.1}, {"dt": "03/01/2000", "RAIL_FRT_INTERMODAL": 771024.6}, {"dt": "04/01/2000", "RAIL_FRT_INTERMODAL": 747905.3}, {"dt": "05/01/2000", "RAIL_FRT_INTERMODAL": 772851.6}, {"dt": "06/01/2000", "RAIL_FRT_INTERMODAL": 763056.0}, {"dt": "07/01/2000", "RAIL_FRT_INTERMODAL": 760108.6}, {"dt": "08/01/2000", "RAIL_FRT_INTERMODAL": 814860.1}, {"dt": "09/01/2000", "RAIL_FRT_INTERMODAL": 789036.6}, {"dt": "10/01/2000", "RAIL_FRT_INTERMODAL": 859903.0}, {"dt": "11/01/2000", "RAIL_FRT_INTERMODAL": 755193.9}, {"dt": "12/01/2000", "RAIL_FRT_INTERMODAL": 710715.1}, {"dt": "01/01/2001", "RAIL_FRT_INTERMODAL": 718207.6}, {"dt": "02/01/2001", "RAIL_FRT_INTERMODAL": 666813.0}, {"dt": "03/01/2001", "RAIL_FRT_INTERMODAL": 761942.4}, {"dt": "04/01/2001", "RAIL_FRT_INTERMODAL": 717395.6}, {"dt": "05/01/2001", "RAIL_FRT_INTERMODAL": 734970.1}, {"dt": "06/01/2001", "RAIL_FRT_INTERMODAL": 743527.3}, {"dt": "07/01/2001", "RAIL_FRT_INTERMODAL": 733967.4}, {"dt": "08/01/2001", "RAIL_FRT_INTERMODAL": 802541.6}, {"dt": "09/01/2001", "RAIL_FRT_INTERMODAL": 775082.3}, {"dt": "10/01/2001", "RAIL_FRT_INTERMODAL": 827614.1}, {"dt": "11/01/2001", "RAIL_FRT_INTERMODAL": 743670.3}, {"dt": "12/01/2001", "RAIL_FRT_INTERMODAL": 688214.7}, {"dt": "01/01/2002", "RAIL_FRT_INTERMODAL": 701350.3}, {"dt": "02/01/2002", "RAIL_FRT_INTERMODAL": 688594.6}, {"dt": "03/01/2002", "RAIL_FRT_INTERMODAL": 758158.4}, {"dt": "04/01/2002", "RAIL_FRT_INTERMODAL": 774537.4}, {"dt": "05/01/2002", "RAIL_FRT_INTERMODAL": 800214.9}, {"dt": "06/01/2002", "RAIL_FRT_INTERMODAL": 805089.3}, {"dt": "07/01/2002", "RAIL_FRT_INTERMODAL": 800913.1}, {"dt": "08/01/2002", "RAIL_FRT_INTERMODAL": 867103.6}, {"dt": "09/01/2002", "RAIL_FRT_INTERMODAL": 810855.9}, {"dt": "10/01/2002", "RAIL_FRT_INTERMODAL": 791259.4}, {"dt": "11/01/2002", "RAIL_FRT_INTERMODAL": 790999.7}, {"dt": "12/01/2002", "RAIL_FRT_INTERMODAL": 744614.7}, {"dt": "01/01/2003", "RAIL_FRT_INTERMODAL": 787446.1}, {"dt": "02/01/2003", "RAIL_FRT_INTERMODAL": 730315.3}, {"dt": "03/01/2003", "RAIL_FRT_INTERMODAL": 826783.3}, {"dt": "04/01/2003", "RAIL_FRT_INTERMODAL": 810804.6}, {"dt": "05/01/2003", "RAIL_FRT_INTERMODAL": 836029.0}, {"dt": "06/01/2003", "RAIL_FRT_INTERMODAL": 829971.0}, {"dt": "07/01/2003", "RAIL_FRT_INTERMODAL": 839459.4}, {"dt": "08/01/2003", "RAIL_FRT_INTERMODAL": 871756.6}, {"dt": "09/01/2003", "RAIL_FRT_INTERMODAL": 857230.9}, {"dt": "10/01/2003", "RAIL_FRT_INTERMODAL": 928584.3}, {"dt": "11/01/2003", "RAIL_FRT_INTERMODAL": 852169.6}, {"dt": "12/01/2003", "RAIL_FRT_INTERMODAL": 797451.4}, {"dt": "01/01/2004", "RAIL_FRT_INTERMODAL": 841768.9}, {"dt": "02/01/2004", "RAIL_FRT_INTERMODAL": 806222.3}, {"dt": "03/01/2004", "RAIL_FRT_INTERMODAL": 906898.7}, {"dt": "04/01/2004", "RAIL_FRT_INTERMODAL": 892141.6}, {"dt": "05/01/2004", "RAIL_FRT_INTERMODAL": 938204.0}, {"dt": "06/01/2004", "RAIL_FRT_INTERMODAL": 916328.4}, {"dt": "07/01/2004", "RAIL_FRT_INTERMODAL": 930866.0}, {"dt": "08/01/2004", "RAIL_FRT_INTERMODAL": 970145.0}, {"dt": "09/01/2004", "RAIL_FRT_INTERMODAL": 937212.7}, {"dt": "10/01/2004", "RAIL_FRT_INTERMODAL": 1027748.9}, {"dt": "11/01/2004", "RAIL_FRT_INTERMODAL": 956383.0}, {"dt": "12/01/2004", "RAIL_FRT_INTERMODAL": 906274.9}, {"dt": "01/01/2005", "RAIL_FRT_INTERMODAL": 925534.0}, {"dt": "02/01/2005", "RAIL_FRT_INTERMODAL": 883984.0}, {"dt": "03/01/2005", "RAIL_FRT_INTERMODAL": 935163.3}, {"dt": "04/01/2005", "RAIL_FRT_INTERMODAL": 945359.3}, {"dt": "05/01/2005", "RAIL_FRT_INTERMODAL": 976853.9}, {"dt": "06/01/2005", "RAIL_FRT_INTERMODAL": 956013.6}, {"dt": "07/01/2005", "RAIL_FRT_INTERMODAL": 979129.6}, {"dt": "08/01/2005", "RAIL_FRT_INTERMODAL": 1040830.6}, {"dt": "09/01/2005", "RAIL_FRT_INTERMODAL": 1002950.9}, {"dt": "10/01/2005", "RAIL_FRT_INTERMODAL": 1093139.3}, {"dt": "11/01/2005", "RAIL_FRT_INTERMODAL": 1000302.0}, {"dt": "12/01/2005", "RAIL_FRT_INTERMODAL": 977753.3}, {"dt": "01/01/2006", "RAIL_FRT_INTERMODAL": 991980.3}, {"dt": "02/01/2006", "RAIL_FRT_INTERMODAL": 896379.1}, {"dt": "03/01/2006", "RAIL_FRT_INTERMODAL": 1012539.9}, {"dt": "04/01/2006", "RAIL_FRT_INTERMODAL": 1015609.4}, {"dt": "05/01/2006", "RAIL_FRT_INTERMODAL": 1045038.9}, {"dt": "06/01/2006", "RAIL_FRT_INTERMODAL": 1033661.0}, {"dt": "07/01/2006", "RAIL_FRT_INTERMODAL": 1041756.4}, {"dt": "08/01/2006", "RAIL_FRT_INTERMODAL": 1106273.3}, {"dt": "09/01/2006", "RAIL_FRT_INTERMODAL": 1060236.7}, {"dt": "10/01/2006", "RAIL_FRT_INTERMODAL": 1113993.4}, {"dt": "11/01/2006", "RAIL_FRT_INTERMODAL": 1006847.1}, {"dt": "12/01/2006", "RAIL_FRT_INTERMODAL": 984846.1}, {"dt": "01/01/2007", "RAIL_FRT_INTERMODAL": 981971.9}, {"dt": "02/01/2007", "RAIL_FRT_INTERMODAL": 920163.6}, {"dt": "03/01/2007", "RAIL_FRT_INTERMODAL": 1009962.9}, {"dt": "04/01/2007", "RAIL_FRT_INTERMODAL": 974909.0}, {"dt": "05/01/2007", "RAIL_FRT_INTERMODAL": 1018160.0}, {"dt": "06/01/2007", "RAIL_FRT_INTERMODAL": 1020267.0}, {"dt": "07/01/2007", "RAIL_FRT_INTERMODAL": 1015525.7}, {"dt": "08/01/2007", "RAIL_FRT_INTERMODAL": 1058590.9}, {"dt": "09/01/2007", "RAIL_FRT_INTERMODAL": 1032837.3}, {"dt": "10/01/2007", "RAIL_FRT_INTERMODAL": 1071991.1}, {"dt": "11/01/2007", "RAIL_FRT_INTERMODAL": 993054.6}, {"dt": "12/01/2007", "RAIL_FRT_INTERMODAL": 949057.0}, {"dt": "01/01/2008", "RAIL_FRT_INTERMODAL": 957434.6}, {"dt": "02/01/2008", "RAIL_FRT_INTERMODAL": 926465.7}, {"dt": "03/01/2008", "RAIL_FRT_INTERMODAL": 950282.4}, {"dt": "04/01/2008", "RAIL_FRT_INTERMODAL": 959168.9}, {"dt": "05/01/2008", "RAIL_FRT_INTERMODAL": 997833.9}, {"dt": "06/01/2008", "RAIL_FRT_INTERMODAL": 978498.4}, {"dt": "07/01/2008", "RAIL_FRT_INTERMODAL": 1004377.6}, {"dt": "08/01/2008", "RAIL_FRT_INTERMODAL": 1036146.6}, {"dt": "09/01/2008", "RAIL_FRT_INTERMODAL": 994548.7}, {"dt": "10/01/2008", "RAIL_FRT_INTERMODAL": 1037799.1}, {"dt": "11/01/2008", "RAIL_FRT_INTERMODAL": 915199.7}, {"dt": "12/01/2008", "RAIL_FRT_INTERMODAL": 796421.0}, {"dt": "01/01/2009", "RAIL_FRT_INTERMODAL": 846510.9}, {"dt": "02/01/2009", "RAIL_FRT_INTERMODAL": 726343.0}, {"dt": "03/01/2009", "RAIL_FRT_INTERMODAL": 808252.3}, {"dt": "04/01/2009", "RAIL_FRT_INTERMODAL": 785964.4}, {"dt": "05/01/2009", "RAIL_FRT_INTERMODAL": 810364.9}, {"dt": "06/01/2009", "RAIL_FRT_INTERMODAL": 800581.3}, {"dt": "07/01/2009", "RAIL_FRT_INTERMODAL": 822512.0}, {"dt": "08/01/2009", "RAIL_FRT_INTERMODAL": 869309.7}, {"dt": "09/01/2009", "RAIL_FRT_INTERMODAL": 847217.1}, {"dt": "10/01/2009", "RAIL_FRT_INTERMODAL": 914752.3}, {"dt": "11/01/2009", "RAIL_FRT_INTERMODAL": 853396.0}, {"dt": "12/01/2009", "RAIL_FRT_INTERMODAL": 810958.0}, {"dt": "01/01/2010", "RAIL_FRT_INTERMODAL": 874627.9}, {"dt": "02/01/2010", "RAIL_FRT_INTERMODAL": 801194.0}, {"dt": "03/01/2010", "RAIL_FRT_INTERMODAL": 909992.1}, {"dt": "04/01/2010", "RAIL_FRT_INTERMODAL": 892456.4}, {"dt": "05/01/2010", "RAIL_FRT_INTERMODAL": 952717.6}, {"dt": "06/01/2010", "RAIL_FRT_INTERMODAL": 947437.0}, {"dt": "07/01/2010", "RAIL_FRT_INTERMODAL": 983066.0}, {"dt": "08/01/2010", "RAIL_FRT_INTERMODAL": 1040147.0}, {"dt": "09/01/2010", "RAIL_FRT_INTERMODAL": 995070.6}, {"dt": "10/01/2010", "RAIL_FRT_INTERMODAL": 1043429.6}, {"dt": "11/01/2010", "RAIL_FRT_INTERMODAL": 951816.0}, {"dt": "12/01/2010", "RAIL_FRT_INTERMODAL": 909185.9}, {"dt": "01/01/2011", "RAIL_FRT_INTERMODAL": 943868.7}, {"dt": "02/01/2011", "RAIL_FRT_INTERMODAL": 886140.1}, {"dt": "03/01/2011", "RAIL_FRT_INTERMODAL": 983115.0}, {"dt": "04/01/2011", "RAIL_FRT_INTERMODAL": 981463.1}, {"dt": "05/01/2011", "RAIL_FRT_INTERMODAL": 1021055.3}, {"dt": "06/01/2011", "RAIL_FRT_INTERMODAL": 996621.9}, {"dt": "07/01/2011", "RAIL_FRT_INTERMODAL": 997012.4}, {"dt": "08/01/2011", "RAIL_FRT_INTERMODAL": 1045925.0}, {"dt": "09/01/2011", "RAIL_FRT_INTERMODAL": 1014028.7}, {"dt": "10/01/2011", "RAIL_FRT_INTERMODAL": 1079740.9}, {"dt": "11/01/2011", "RAIL_FRT_INTERMODAL": 989341.7}, {"dt": "12/01/2011", "RAIL_FRT_INTERMODAL": 977960.1}, {"dt": "01/01/2012", "RAIL_FRT_INTERMODAL": 977416.7}, {"dt": "02/01/2012", "RAIL_FRT_INTERMODAL": 925370.9}, {"dt": "03/01/2012", "RAIL_FRT_INTERMODAL": 1025735.4}, {"dt": "04/01/2012", "RAIL_FRT_INTERMODAL": 1015260.9}, {"dt": "05/01/2012", "RAIL_FRT_INTERMODAL": 1048914.6}, {"dt": "06/01/2012", "RAIL_FRT_INTERMODAL": 1057110.6}, {"dt": "07/01/2012", "RAIL_FRT_INTERMODAL": 1050304.4}, {"dt": "08/01/2012", "RAIL_FRT_INTERMODAL": 1091182.3}, {"dt": "09/01/2012", "RAIL_FRT_INTERMODAL": 1055933.1}, {"dt": "10/01/2012", "RAIL_FRT_INTERMODAL": 1101408.1}, {"dt": "11/01/2012", "RAIL_FRT_INTERMODAL": 996259.0}, {"dt": "12/01/2012", "RAIL_FRT_INTERMODAL": 973474.0}, {"dt": "01/01/2013", "RAIL_FRT_INTERMODAL": 1046441.6}, {"dt": "02/01/2013", "RAIL_FRT_INTERMODAL": 983077.4}, {"dt": "03/01/2013", "RAIL_FRT_INTERMODAL": 1037565.6}, {"dt": "04/01/2013", "RAIL_FRT_INTERMODAL": 1034193.7}, {"dt": "05/01/2013", "RAIL_FRT_INTERMODAL": 1077102.0}, {"dt": "06/01/2013", "RAIL_FRT_INTERMODAL": 1070484.4}, {"dt": "07/01/2013", "RAIL_FRT_INTERMODAL": 1079970.0}, {"dt": "08/01/2013", "RAIL_FRT_INTERMODAL": 1140462.3}, {"dt": "09/01/2013", "RAIL_FRT_INTERMODAL": 1103441.9}, {"dt": "10/01/2013", "RAIL_FRT_INTERMODAL": 1165981.7}, {"dt": "11/01/2013", "RAIL_FRT_INTERMODAL": 1083084.4}, {"dt": "12/01/2013", "RAIL_FRT_INTERMODAL": 1038693.6}, {"dt": "01/01/2014", "RAIL_FRT_INTERMODAL": 1067964.4}, {"dt": "02/01/2014", "RAIL_FRT_INTERMODAL": 992254.4}, {"dt": "03/01/2014", "RAIL_FRT_INTERMODAL": 1137395.3}, {"dt": "04/01/2014", "RAIL_FRT_INTERMODAL": 1126987.1}, {"dt": "05/01/2014", "RAIL_FRT_INTERMODAL": 1160489.1}, {"dt": "06/01/2014", "RAIL_FRT_INTERMODAL": 1142230.0}, {"dt": "07/01/2014", "RAIL_FRT_INTERMODAL": 1144251.7}, {"dt": "08/01/2014", "RAIL_FRT_INTERMODAL": 1187136.0}, {"dt": "09/01/2014", "RAIL_FRT_INTERMODAL": 1157441.9}, {"dt": "10/01/2014", "RAIL_FRT_INTERMODAL": 1223207.0}, {"dt": "11/01/2014", "RAIL_FRT_INTERMODAL": 1113273.4}, {"dt": "12/01/2014", "RAIL_FRT_INTERMODAL": 1070542.0}, {"dt": "01/01/2015", "RAIL_FRT_INTERMODAL": 1084673.0}, {"dt": "02/01/2015", "RAIL_FRT_INTERMODAL": 929348.0}, {"dt": "03/01/2015", "RAIL_FRT_INTERMODAL": 1200332.0}, {"dt": "04/01/2015", "RAIL_FRT_INTERMODAL": 1186357.9}, {"dt": "05/01/2015", "RAIL_FRT_INTERMODAL": 1206950.0}, {"dt": "06/01/2015", "RAIL_FRT_INTERMODAL": 1186246.9}, {"dt": "07/01/2015", "RAIL_FRT_INTERMODAL": 1184112.3}, {"dt": "08/01/2015", "RAIL_FRT_INTERMODAL": 1232802.1}, {"dt": "09/01/2015", "RAIL_FRT_INTERMODAL": 1165128.9}, {"dt": "10/01/2015", "RAIL_FRT_INTERMODAL": 1209771.0}, {"dt": "11/01/2015", "RAIL_FRT_INTERMODAL": 1101811.4}, {"dt": "12/01/2015", "RAIL_FRT_INTERMODAL": 1049014.4}, {"dt": "01/01/2016", "RAIL_FRT_INTERMODAL": 1130857.6}, {"dt": "02/01/2016", "RAIL_FRT_INTERMODAL": 1087281.0}, {"dt": "03/01/2016", "RAIL_FRT_INTERMODAL": 1102697.0}, {"dt": "04/01/2016", "RAIL_FRT_INTERMODAL": 1101109.6}, {"dt": "05/01/2016", "RAIL_FRT_INTERMODAL": 1148705.1}, {"dt": "06/01/2016", "RAIL_FRT_INTERMODAL": 1120397.7}, {"dt": "07/01/2016", "RAIL_FRT_INTERMODAL": 1115818.9}, {"dt": "08/01/2016", "RAIL_FRT_INTERMODAL": 1175723.0}, {"dt": "09/01/2016", "RAIL_FRT_INTERMODAL": 1116007.3}, {"dt": "10/01/2016", "RAIL_FRT_INTERMODAL": 1192422.1}, {"dt": "11/01/2016", "RAIL_FRT_INTERMODAL": 1121925.0}, {"dt": "12/01/2016", "RAIL_FRT_INTERMODAL": 1131382.9}, {"dt": "01/01/2017", "RAIL_FRT_INTERMODAL": 1113970.6}, {"dt": "02/01/2017", "RAIL_FRT_INTERMODAL": 1040348.1}, {"dt": "03/01/2017", "RAIL_FRT_INTERMODAL": 1123340.3}, {"dt": "04/01/2017", "RAIL_FRT_INTERMODAL": 1103713.3}, {"dt": "05/01/2017", "RAIL_FRT_INTERMODAL": 1171410.3}, {"dt": "06/01/2017", "RAIL_FRT_INTERMODAL": 1156505.6}, {"dt": "07/01/2017", "RAIL_FRT_INTERMODAL": 1153880.7}, {"dt": "08/01/2017", "RAIL_FRT_INTERMODAL": 1216327.7}, {"dt": "09/01/2017", "RAIL_FRT_INTERMODAL": 1139093.4}, {"dt": "10/01/2017", "RAIL_FRT_INTERMODAL": 1233353.1}, {"dt": "11/01/2017", "RAIL_FRT_INTERMODAL": 1143805.6}, {"dt": "12/01/2017", "RAIL_FRT_INTERMODAL": 1155489.7}, {"dt": "01/01/2018", "RAIL_FRT_INTERMODAL": 1159338.0}, {"dt": "02/01/2018", "RAIL_FRT_INTERMODAL": 1105421.1}, {"dt": "03/01/2018", "RAIL_FRT_INTERMODAL": 1201985.4}, {"dt": "04/01/2018", "RAIL_FRT_INTERMODAL": 1179073.4}, {"dt": "05/01/2018", "RAIL_FRT_INTERMODAL": 1244509.0}, {"dt": "06/01/2018", "RAIL_FRT_INTERMODAL": 1233576.6}, {"dt": "07/01/2018", "RAIL_FRT_INTERMODAL": 1232879.6}, {"dt": "08/01/2018", "RAIL_FRT_INTERMODAL": 1276947.6}, {"dt": "09/01/2018", "RAIL_FRT_INTERMODAL": 1209201.6}, {"dt": "10/01/2018", "RAIL_FRT_INTERMODAL": 1279057.1}, {"dt": "11/01/2018", "RAIL_FRT_INTERMODAL": 1183103.7}, {"dt": "12/01/2018", "RAIL_FRT_INTERMODAL": 1199347.0}, {"dt": "01/01/2019", "RAIL_FRT_INTERMODAL": 1181895.9}, {"dt": "02/01/2019", "RAIL_FRT_INTERMODAL": 1088286.9}, {"dt": "03/01/2019", "RAIL_FRT_INTERMODAL": 1182129.7}, {"dt": "04/01/2019", "RAIL_FRT_INTERMODAL": 1133353.9}, {"dt": "05/01/2019", "RAIL_FRT_INTERMODAL": 1166976.9}, {"dt": "06/01/2019", "RAIL_FRT_INTERMODAL": 1142914.6}, {"dt": "07/01/2019", "RAIL_FRT_INTERMODAL": 1163929.9}, {"dt": "08/01/2019", "RAIL_FRT_INTERMODAL": 1207739.9}, {"dt": "09/01/2019", "RAIL_FRT_INTERMODAL": 1138058.4}, {"dt": "10/01/2019", "RAIL_FRT_INTERMODAL": 1179755.9}, {"dt": "11/01/2019", "RAIL_FRT_INTERMODAL": 1095405.7}, {"dt": "12/01/2019", "RAIL_FRT_INTERMODAL": 1075973.0}, {"dt": "01/01/2020", "RAIL_FRT_INTERMODAL": 1121664.4}, {"dt": "02/01/2020", "RAIL_FRT_INTERMODAL": 1036214.6}, {"dt": "03/01/2020", "RAIL_FRT_INTERMODAL": 1028873.4}, {"dt": "04/01/2020", "RAIL_FRT_INTERMODAL": 936801.7}, {"dt": "05/01/2020", "RAIL_FRT_INTERMODAL": 1012346.0}, {"dt": "06/01/2020", "RAIL_FRT_INTERMODAL": 1075605.1}, {"dt": "07/01/2020", "RAIL_FRT_INTERMODAL": 1152234.6}, {"dt": "08/01/2020", "RAIL_FRT_INTERMODAL": 1243652.4}, {"dt": "09/01/2020", "RAIL_FRT_INTERMODAL": 1218979.0}, {"dt": "10/01/2020", "RAIL_FRT_INTERMODAL": 1292685.7}, {"dt": "11/01/2020", "RAIL_FRT_INTERMODAL": 1221660.6}, {"dt": "12/01/2020", "RAIL_FRT_INTERMODAL": 1186807.9}, {"dt": "01/01/2021", "RAIL_FRT_INTERMODAL": 1274511.7}, {"dt": "02/01/2021", "RAIL_FRT_INTERMODAL": 1017914.9}, {"dt": "03/01/2021", "RAIL_FRT_INTERMODAL": 1267475.3}, {"dt": "04/01/2021", "RAIL_FRT_INTERMODAL": 1253644.6}, {"dt": "05/01/2021", "RAIL_FRT_INTERMODAL": 1269401.6}, {"dt": "06/01/2021", "RAIL_FRT_INTERMODAL": 1193552.0}, {"dt": "07/01/2021", "RAIL_FRT_INTERMODAL": 1184292.6}, {"dt": "08/01/2021", "RAIL_FRT_INTERMODAL": 1199382.0}, {"dt": "09/01/2021", "RAIL_FRT_INTERMODAL": 1136161.9}, {"dt": "10/01/2021", "RAIL_FRT_INTERMODAL": 1194149.9}, {"dt": "11/01/2021", "RAIL_FRT_INTERMODAL": 1106400.0}, {"dt": "12/01/2021", "RAIL_FRT_INTERMODAL": 1080887.9}, {"dt": "01/01/2022", "RAIL_FRT_INTERMODAL": 1096981.1}, {"dt": "02/01/2022", "RAIL_FRT_INTERMODAL": 1037892.0}, {"dt": "03/01/2022", "RAIL_FRT_INTERMODAL": 1184895.4}, {"dt": "04/01/2022", "RAIL_FRT_INTERMODAL": 1160359.9}, {"dt": "05/01/2022", "RAIL_FRT_INTERMODAL": 1209803.3}, {"dt": "06/01/2022", "RAIL_FRT_INTERMODAL": 1139952.6}, {"dt": "07/01/2022", "RAIL_FRT_INTERMODAL": 1147820.4}, {"dt": "08/01/2022", "RAIL_FRT_INTERMODAL": 1181200.7}, {"dt": "09/01/2022", "RAIL_FRT_INTERMODAL": 1090378.3}, {"dt": "10/01/2022", "RAIL_FRT_INTERMODAL": 1173723.1}, {"dt": "11/01/2022", "RAIL_FRT_INTERMODAL": 1047411.7}, {"dt": "12/01/2022", "RAIL_FRT_INTERMODAL": 1009140.9}, {"dt": "01/01/2023", "RAIL_FRT_INTERMODAL": 1019736.3}]}}, {"mode": "vega-lite"});
</script></div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Vehicle-Miles-Traveled">Vehicle Miles Traveled<a class="anchor-link" href="#Vehicle-Miles-Traveled">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doComboChart</span><span class="p">(</span><span class="n">df_af</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;VMT&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;US Vehicle Miles Travels&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Miles&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[8]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">
<div id="altair-viz-b86bf55fad7c4a39be3f9f1c1936bef0"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-b86bf55fad7c4a39be3f9f1c1936bef0") {
      outputDiv = document.getElementById("altair-viz-b86bf55fad7c4a39be3f9f1c1936bef0");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "4.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "vconcat": [{"mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['yoy'] < 0"}, "value": "royalblue"}, "tooltip": [{"field": "dt", "format": "%b %Y", "type": "temporal"}, {"field": "VMT", "format": ",.02f", "type": "quantitative"}], "x": {"axis": {"title": ""}, "field": "dt", "impute": {"value": null}, "scale": {"domain": {"selection": "selector005"}}, "type": "temporal"}, "y": {"axis": {"title": "Year-over-Year Growth [%]"}, "field": "yoy", "impute": {"keyvals": [400, 1000], "method": "value"}, "type": "quantitative"}}, "height": 400, "title": "US Vehicle Miles Travels", "transform": [{"window": [{"op": "lag", "field": "VMT", "param": 12, "as": "previous"}], "sort": [{"field": "dt"}]}, {"calculate": "((datum['VMT'] - datum.previous) / datum.previous) * 100", "as": "yoy"}], "width": 750}, {"mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"field": "dt", "format": "%b %Y", "type": "temporal"}, {"field": "VMT", "format": ",.02f", "type": "quantitative"}], "x": {"axis": {"title": ""}, "field": "dt", "type": "temporal"}, "y": {"axis": {"title": "Miles"}, "field": "VMT", "type": "quantitative"}}, "height": 100, "selection": {"selector005": {"type": "interval", "encodings": ["x"]}}, "width": 750}], "background": "white", "data": {"name": "data-07fdac756a89e797a2c5419733e1e606"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-07fdac756a89e797a2c5419733e1e606": [{"dt": "01/01/2000", "VMT": 203442}, {"dt": "02/01/2000", "VMT": 199261}, {"dt": "03/01/2000", "VMT": 232490}, {"dt": "04/01/2000", "VMT": 227698}, {"dt": "05/01/2000", "VMT": 242501}, {"dt": "06/01/2000", "VMT": 242963}, {"dt": "07/01/2000", "VMT": 245140}, {"dt": "08/01/2000", "VMT": 247832}, {"dt": "09/01/2000", "VMT": 227899}, {"dt": "10/01/2000", "VMT": 236491}, {"dt": "11/01/2000", "VMT": 222819}, {"dt": "12/01/2000", "VMT": 218390}, {"dt": "01/01/2001", "VMT": 209685}, {"dt": "02/01/2001", "VMT": 200876}, {"dt": "03/01/2001", "VMT": 232587}, {"dt": "04/01/2001", "VMT": 232513}, {"dt": "05/01/2001", "VMT": 245357}, {"dt": "06/01/2001", "VMT": 243498}, {"dt": "07/01/2001", "VMT": 250363}, {"dt": "08/01/2001", "VMT": 253274}, {"dt": "09/01/2001", "VMT": 226312}, {"dt": "10/01/2001", "VMT": 241050}, {"dt": "11/01/2001", "VMT": 230511}, {"dt": "12/01/2001", "VMT": 229584}, {"dt": "01/01/2002", "VMT": 215215}, {"dt": "02/01/2002", "VMT": 208237}, {"dt": "03/01/2002", "VMT": 236070}, {"dt": "04/01/2002", "VMT": 237226}, {"dt": "05/01/2002", "VMT": 251746}, {"dt": "06/01/2002", "VMT": 247868}, {"dt": "07/01/2002", "VMT": 256392}, {"dt": "08/01/2002", "VMT": 258666}, {"dt": "09/01/2002", "VMT": 233625}, {"dt": "10/01/2002", "VMT": 245556}, {"dt": "11/01/2002", "VMT": 230648}, {"dt": "12/01/2002", "VMT": 234260}, {"dt": "01/01/2003", "VMT": 218534}, {"dt": "02/01/2003", "VMT": 203677}, {"dt": "03/01/2003", "VMT": 236679}, {"dt": "04/01/2003", "VMT": 239415}, {"dt": "05/01/2003", "VMT": 253244}, {"dt": "06/01/2003", "VMT": 252145}, {"dt": "07/01/2003", "VMT": 262105}, {"dt": "08/01/2003", "VMT": 260687}, {"dt": "09/01/2003", "VMT": 237451}, {"dt": "10/01/2003", "VMT": 254048}, {"dt": "11/01/2003", "VMT": 233698}, {"dt": "12/01/2003", "VMT": 238538}, {"dt": "01/01/2004", "VMT": 222450}, {"dt": "02/01/2004", "VMT": 213709}, {"dt": "03/01/2004", "VMT": 251403}, {"dt": "04/01/2004", "VMT": 250968}, {"dt": "05/01/2004", "VMT": 257235}, {"dt": "06/01/2004", "VMT": 257383}, {"dt": "07/01/2004", "VMT": 265969}, {"dt": "08/01/2004", "VMT": 262836}, {"dt": "09/01/2004", "VMT": 243515}, {"dt": "10/01/2004", "VMT": 254496}, {"dt": "11/01/2004", "VMT": 239796}, {"dt": "12/01/2004", "VMT": 245029}, {"dt": "01/01/2005", "VMT": 224072}, {"dt": "02/01/2005", "VMT": 219970}, {"dt": "03/01/2005", "VMT": 253182}, {"dt": "04/01/2005", "VMT": 250860}, {"dt": "05/01/2005", "VMT": 262678}, {"dt": "06/01/2005", "VMT": 263816}, {"dt": "07/01/2005", "VMT": 267025}, {"dt": "08/01/2005", "VMT": 265323}, {"dt": "09/01/2005", "VMT": 242240}, {"dt": "10/01/2005", "VMT": 251419}, {"dt": "11/01/2005", "VMT": 243056}, {"dt": "12/01/2005", "VMT": 245787}, {"dt": "01/01/2006", "VMT": 233282}, {"dt": "02/01/2006", "VMT": 220711}, {"dt": "03/01/2006", "VMT": 256623}, {"dt": "04/01/2006", "VMT": 250644}, {"dt": "05/01/2006", "VMT": 263370}, {"dt": "06/01/2006", "VMT": 263782}, {"dt": "07/01/2006", "VMT": 263421}, {"dt": "08/01/2006", "VMT": 265206}, {"dt": "09/01/2006", "VMT": 245605}, {"dt": "10/01/2006", "VMT": 257939}, {"dt": "11/01/2006", "VMT": 245346}, {"dt": "12/01/2006", "VMT": 248187}, {"dt": "01/01/2007", "VMT": 233621}, {"dt": "02/01/2007", "VMT": 219232}, {"dt": "03/01/2007", "VMT": 259638}, {"dt": "04/01/2007", "VMT": 252595}, {"dt": "05/01/2007", "VMT": 267574}, {"dt": "06/01/2007", "VMT": 265374}, {"dt": "07/01/2007", "VMT": 267106}, {"dt": "08/01/2007", "VMT": 271225}, {"dt": "09/01/2007", "VMT": 245965}, {"dt": "10/01/2007", "VMT": 261423}, {"dt": "11/01/2007", "VMT": 245787}, {"dt": "12/01/2007", "VMT": 240281}, {"dt": "01/01/2008", "VMT": 232920}, {"dt": "02/01/2008", "VMT": 221336}, {"dt": "03/01/2008", "VMT": 252343}, {"dt": "04/01/2008", "VMT": 252088}, {"dt": "05/01/2008", "VMT": 261466}, {"dt": "06/01/2008", "VMT": 257484}, {"dt": "07/01/2008", "VMT": 261600}, {"dt": "08/01/2008", "VMT": 260609}, {"dt": "09/01/2008", "VMT": 239607}, {"dt": "10/01/2008", "VMT": 255848}, {"dt": "11/01/2008", "VMT": 236465}, {"dt": "12/01/2008", "VMT": 241742}, {"dt": "01/01/2009", "VMT": 225529}, {"dt": "02/01/2009", "VMT": 217643}, {"dt": "03/01/2009", "VMT": 249741}, {"dt": "04/01/2009", "VMT": 251374}, {"dt": "05/01/2009", "VMT": 258276}, {"dt": "06/01/2009", "VMT": 258395}, {"dt": "07/01/2009", "VMT": 264472}, {"dt": "08/01/2009", "VMT": 260297}, {"dt": "09/01/2009", "VMT": 241970}, {"dt": "10/01/2009", "VMT": 252209}, {"dt": "11/01/2009", "VMT": 237264}, {"dt": "12/01/2009", "VMT": 239593}, {"dt": "01/01/2010", "VMT": 220839}, {"dt": "02/01/2010", "VMT": 210635}, {"dt": "03/01/2010", "VMT": 254238}, {"dt": "04/01/2010", "VMT": 253936}, {"dt": "05/01/2010", "VMT": 256927}, {"dt": "06/01/2010", "VMT": 260083}, {"dt": "07/01/2010", "VMT": 265315}, {"dt": "08/01/2010", "VMT": 263837}, {"dt": "09/01/2010", "VMT": 244682}, {"dt": "10/01/2010", "VMT": 256395}, {"dt": "11/01/2010", "VMT": 239579}, {"dt": "12/01/2010", "VMT": 240800}, {"dt": "01/01/2011", "VMT": 223790}, {"dt": "02/01/2011", "VMT": 213463}, {"dt": "03/01/2011", "VMT": 253124}, {"dt": "04/01/2011", "VMT": 249578}, {"dt": "05/01/2011", "VMT": 254083}, {"dt": "06/01/2011", "VMT": 258350}, {"dt": "07/01/2011", "VMT": 260175}, {"dt": "08/01/2011", "VMT": 260526}, {"dt": "09/01/2011", "VMT": 242062}, {"dt": "10/01/2011", "VMT": 251906}, {"dt": "11/01/2011", "VMT": 238535}, {"dt": "12/01/2011", "VMT": 244810}, {"dt": "01/01/2012", "VMT": 227527}, {"dt": "02/01/2012", "VMT": 218196}, {"dt": "03/01/2012", "VMT": 256166}, {"dt": "04/01/2012", "VMT": 249394}, {"dt": "05/01/2012", "VMT": 260774}, {"dt": "06/01/2012", "VMT": 260376}, {"dt": "07/01/2012", "VMT": 260244}, {"dt": "08/01/2012", "VMT": 264379}, {"dt": "09/01/2012", "VMT": 238867}, {"dt": "10/01/2012", "VMT": 253574}, {"dt": "11/01/2012", "VMT": 240361}, {"dt": "12/01/2012", "VMT": 238709}, {"dt": "01/01/2013", "VMT": 229419}, {"dt": "02/01/2013", "VMT": 215803}, {"dt": "03/01/2013", "VMT": 253026}, {"dt": "04/01/2013", "VMT": 252064}, {"dt": "05/01/2013", "VMT": 263406}, {"dt": "06/01/2013", "VMT": 259980}, {"dt": "07/01/2013", "VMT": 263946}, {"dt": "08/01/2013", "VMT": 268061}, {"dt": "09/01/2013", "VMT": 242536}, {"dt": "10/01/2013", "VMT": 258748}, {"dt": "11/01/2013", "VMT": 240055}, {"dt": "12/01/2013", "VMT": 241237}, {"dt": "01/01/2014", "VMT": 226413}, {"dt": "02/01/2014", "VMT": 213949}, {"dt": "03/01/2014", "VMT": 253424}, {"dt": "04/01/2014", "VMT": 256736}, {"dt": "05/01/2014", "VMT": 266237}, {"dt": "06/01/2014", "VMT": 263459}, {"dt": "07/01/2014", "VMT": 270053}, {"dt": "08/01/2014", "VMT": 268831}, {"dt": "09/01/2014", "VMT": 247688}, {"dt": "10/01/2014", "VMT": 265144}, {"dt": "11/01/2014", "VMT": 241451}, {"dt": "12/01/2014", "VMT": 252271}, {"dt": "01/01/2015", "VMT": 233498}, {"dt": "02/01/2015", "VMT": 217220}, {"dt": "03/01/2015", "VMT": 258017}, {"dt": "04/01/2015", "VMT": 262817}, {"dt": "05/01/2015", "VMT": 270839}, {"dt": "06/01/2015", "VMT": 270574}, {"dt": "07/01/2015", "VMT": 278372}, {"dt": "08/01/2015", "VMT": 272209}, {"dt": "09/01/2015", "VMT": 255090}, {"dt": "10/01/2015", "VMT": 268469}, {"dt": "11/01/2015", "VMT": 248843}, {"dt": "12/01/2015", "VMT": 259424}, {"dt": "01/01/2016", "VMT": 239679}, {"dt": "02/01/2016", "VMT": 223011}, {"dt": "03/01/2016", "VMT": 265147}, {"dt": "04/01/2016", "VMT": 269653}, {"dt": "05/01/2016", "VMT": 277972}, {"dt": "06/01/2016", "VMT": 276991}, {"dt": "07/01/2016", "VMT": 285160}, {"dt": "08/01/2016", "VMT": 279213}, {"dt": "09/01/2016", "VMT": 262039}, {"dt": "10/01/2016", "VMT": 275610}, {"dt": "11/01/2016", "VMT": 255154}, {"dt": "12/01/2016", "VMT": 264778}, {"dt": "01/01/2017", "VMT": 242600}, {"dt": "02/01/2017", "VMT": 225644}, {"dt": "03/01/2017", "VMT": 268343}, {"dt": "04/01/2017", "VMT": 272864}, {"dt": "05/01/2017", "VMT": 281264}, {"dt": "06/01/2017", "VMT": 280290}, {"dt": "07/01/2017", "VMT": 288566}, {"dt": "08/01/2017", "VMT": 282558}, {"dt": "09/01/2017", "VMT": 265212}, {"dt": "10/01/2017", "VMT": 278888}, {"dt": "11/01/2017", "VMT": 258159}, {"dt": "12/01/2017", "VMT": 267958}, {"dt": "01/01/2018", "VMT": 244736}, {"dt": "02/01/2018", "VMT": 227759}, {"dt": "03/01/2018", "VMT": 270705}, {"dt": "04/01/2018", "VMT": 275127}, {"dt": "05/01/2018", "VMT": 283713}, {"dt": "06/01/2018", "VMT": 282648}, {"dt": "07/01/2018", "VMT": 290989}, {"dt": "08/01/2018", "VMT": 284989}, {"dt": "09/01/2018", "VMT": 267434}, {"dt": "10/01/2018", "VMT": 281382}, {"dt": "11/01/2018", "VMT": 260473}, {"dt": "12/01/2018", "VMT": 270370}, {"dt": "01/01/2019", "VMT": 248927}, {"dt": "02/01/2019", "VMT": 231791}, {"dt": "03/01/2019", "VMT": 272379}, {"dt": "04/01/2019", "VMT": 273413}, {"dt": "05/01/2019", "VMT": 289711}, {"dt": "06/01/2019", "VMT": 281359}, {"dt": "07/01/2019", "VMT": 291520}, {"dt": "08/01/2019", "VMT": 293308}, {"dt": "09/01/2019", "VMT": 273319}, {"dt": "10/01/2019", "VMT": 283961}, {"dt": "11/01/2019", "VMT": 260326}, {"dt": "12/01/2019", "VMT": 261757}, {"dt": "01/01/2020", "VMT": 260847}, {"dt": "02/01/2020", "VMT": 242695}, {"dt": "03/01/2020", "VMT": 226638}, {"dt": "04/01/2020", "VMT": 167617}, {"dt": "05/01/2020", "VMT": 221006}, {"dt": "06/01/2020", "VMT": 250330}, {"dt": "07/01/2020", "VMT": 265550}, {"dt": "08/01/2020", "VMT": 265060}, {"dt": "09/01/2020", "VMT": 257531}, {"dt": "10/01/2020", "VMT": 266596}, {"dt": "11/01/2020", "VMT": 238300}, {"dt": "12/01/2020", "VMT": 241451}, {"dt": "01/01/2021", "VMT": 224959}, {"dt": "02/01/2021", "VMT": 207160}, {"dt": "03/01/2021", "VMT": 262065}, {"dt": "04/01/2021", "VMT": 252218}, {"dt": "05/01/2021", "VMT": 276639}, {"dt": "06/01/2021", "VMT": 279209}, {"dt": "07/01/2021", "VMT": 288443}, {"dt": "08/01/2021", "VMT": 279596}, {"dt": "09/01/2021", "VMT": 270461}, {"dt": "10/01/2021", "VMT": 277877}, {"dt": "11/01/2021", "VMT": 260433}, {"dt": "12/01/2021", "VMT": 261028}, {"dt": "01/01/2022", "VMT": 234099}, {"dt": "02/01/2022", "VMT": 229249}, {"dt": "03/01/2022", "VMT": 269479}, {"dt": "04/01/2022", "VMT": 255990}, {"dt": "05/01/2022", "VMT": 280325}, {"dt": "06/01/2022", "VMT": 274869}, {"dt": "07/01/2022", "VMT": 279301}, {"dt": "08/01/2022", "VMT": 281657}, {"dt": "09/01/2022", "VMT": 273148}, {"dt": "10/01/2022", "VMT": 277934}, {"dt": "11/01/2022", "VMT": 256954}, {"dt": "12/01/2022", "VMT": 256430}, {"dt": "01/01/2023", "VMT": 247387}]}}, {"mode": "vega-lite"});
</script></div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<hr>
&copy; <script>document.write(`${new Date().getFullYear()}`);</script> pymoment
</div>
</div>
</body>


<script>
// TODO - some, or all of this could be moved to pre-rendering sed/regex
// add bootstrap table styles to pandoc tables (notebooks)
$(document).ready( () => {

  $('tr').parent('thead').parent('table').addClass('table table-condensed');
  $('tr').parent('thead').parent('table').removeAttr('border');
  $('tr').parent('thead').parent('table').removeClass('dataframe');

  $('.output_area .output_html table thead tr').removeAttr('style');
  $('.output_area .output_html table thead tr th').attr("scope", "col");

  $('.output_area .output_html table tbody tr th').attr("scope", "row");


  // Change the input cell gutter text, make it a link
  $('.input .input_prompt').map((n, e) => {
    e.innerHTML = `<a href="#" >Show Code Cell [${n + 1}]</a>`;
  });

  // Attach an event listener to the above link for show/hide
  $('.input .input_prompt a').map((n, e) => {
    const showOrHide = e => {
      e.preventDefault();
      $(`#code-${n}`).find('.inner_cell').toggleClass('collapse');
      const v = $(`#code-${n}`).find('.input_prompt a');
      if (v.html().includes('Show')) {
        v.html(`Hide Code Cell [${n+1}]`);
      } else {
        v.html(`Show Code Cell [${n+1}]`);
      }
    }

    e.addEventListener("click", showOrHide, false);
  });

  // Annotate parent cells of input cells with id/classes
  $('.input .inner_cell').map((n, e) => {
    $('.input .inner_cell').parent('div').toArray()[n].id = `code-${n}`;
  });
  $('.input .inner_cell')
    .addClass("collapse")
    .after('<div class="inner_cell" style="font-size: 150%; padding-left: 5px;">...</div>');

});
</script>
    

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L3L3NJKFJP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-L3L3NJKFJP');
</script>

</html>
